!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PxtCloudClient=t()}}(function(){var b,t,e;return function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(f)return f(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var f="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("pxt-cloud-api"),s=t("./client_"),a=t("debug")("pxt-cloud:client:chat"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._debug=a,t}return i(t,e),t.prototype.connect=function(t){return e.prototype.connect.call(this,t,"chat")},t.prototype.newMessage=function(t){return this._promiseEvent(o.Events.ChatNewMessage,"object"!=typeof t?{text:t}:t)},t.prototype._onConnect=function(t){e.prototype._onConnect.call(this,t),this._onNotifyReceivedEvent(o.Events.ChatNewMessage,t)},t.prototype._onDisconnect=function(t){this._offNotifyReceivedEvent(o.Events.ChatNewMessage,t)},t}(s.Client);r.ChatClient=u},{"./client_":5,debug:20,"pxt-cloud-api":44}],2:[function(u,t,c){(function(t){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var e,r,n,i,o,s=u("debug")("pxt-cloud:client");"undefined"!=typeof localStorage?i=localStorage:void 0!==t&&t.env&&(i=t.env),i&&(e=i.PXT_CLOUD_HOSTNAME,r=i.PXT_CLOUD_PORT,o=i.PXT_CLOUD_ENABLED,n=!!o&&null!==o.trim().match(/^(true|1|)$/));var a=function(){function t(){}return Object.defineProperty(t,"defaultUri",{get:function(){return"https://"+t.hostname+":"+t.port},enumerable:!0,configurable:!0}),t.hostname=e||"localhost",t.port=r?parseInt(r,10):3e3,t.enabled=n||!1,t}();s("Configuration\n    Host name [PXT_CLOUD_HOSTNAME]: "+(c.ClientConfig=a).hostname+"\n    Port [PXT_CLOUD_PORT]:          "+a.port+"\n    Enabled [PXT_CLOUD_ENABLED]:    "+(a.enabled?"true":"false"))}).call(this,u("_process"))},{_process:43,debug:20}],3:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("pxt-cloud-api"),s=t("./client_"),a=t("debug")("pxt-cloud:client:users"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._debug=a,t}return i(t,e),t.prototype.connect=function(t){return e.prototype.connect.call(this,t,"users")},t.prototype.selfInfo=function(){return this._promiseEvent(o.Events.UserSelfInfo)},t.prototype.addSelf=function(t){return this._promiseEvent(o.Events.UserAddSelf,t)},t.prototype.removeSelf=function(){return this._promiseEvent(o.Events.UserRemoveSelf)},t.prototype._onConnect=function(t){e.prototype._onConnect.call(this,t),this._onNotifyReceivedEvent(o.Events.UserJoined,t),this._onNotifyReceivedEvent(o.Events.UserLeft,t)},t.prototype._onDisconnect=function(t){this._offNotifyReceivedEvent(o.Events.UserJoined,t),this._offNotifyReceivedEvent(o.Events.UserLeft,t)},t}(s.Client);r.UsersClient=u},{"./client_":5,debug:20,"pxt-cloud-api":44}],4:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("bluebird"),c=t("pxt-cloud-api"),s=t("./client_"),a=t("debug")("pxt-cloud:client:world"),u=function(u){function t(){var t=null!==u&&u.apply(this,arguments)||this;return t._debug=a,t._datarepo=new c.DataRepo,t}return i(t,u),t.prototype.connect=function(t){return u.prototype.connect.call(this,t,"world")},t.prototype.addDataSource=function(t,e){return this._datarepo.addDataSource(t,e)},t.prototype.removeDataSource=function(t){return this._datarepo.removeDataSource(t)},t.prototype.currentlySynced=function(t){return o.resolve(this._datarepo.currentlySynced(t))},t.prototype.syncDataSource=function(t){var e=this._datarepo.calcDataDiff(t);return e?this.syncDataDiff(t,e):o.resolve()},t.prototype.syncDataDiff=function(t,e){return 0<e.length?this._promiseEvent(c.Events.WorldSyncDataDiff,{name:t,diff:e}):o.resolve()},t.prototype._onConnect=function(t){u.prototype._onConnect.call(this,t),this._onNotifyReceivedEvent(c.Events.WorldSyncData,t),this._onNotifyReceivedEvent(c.Events.WorldSyncDataDiff,t)},t.prototype._notifyEvent=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];switch(t){case c.Events.WorldSyncData:var n=e[0],i=n.name;n.data;if(!this._datarepo.isDataSource(i))break;break;case c.Events.WorldSyncDataDiff:var o=e[0],s=o.name,a=o.diff;this._datarepo.applyDataDiff(s,a)}u.prototype._notifyEvent.apply(this,[t].concat(e))},t.prototype._onDisconnect=function(t){this._offNotifyReceivedEvent(c.Events.WorldSyncData,t),this._offNotifyReceivedEvent(c.Events.WorldSyncDataDiff,t)},t}(s.Client);r.WorldClient=u},{"./client_":5,bluebird:14,debug:20,"pxt-cloud-api":44}],5:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("bluebird"),o=t("events"),u=t("socket.io-client"),c=t("socket.io-client/lib/url"),f=t("./client.config"),s=function(e){function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.off=e.prototype.removeListener,t._socket=null,t}return i(s,e),Object.defineProperty(s.prototype,"isConnected",{get:function(){return!!this._socket&&this._socket.connected},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"connectedId",{get:function(){return this.isConnected?""+this._socket.id:null},enumerable:!0,configurable:!0}),s.prototype.connect=function(i,o){var s=this;return this.dispose(),new a(function(t,e){if(f.ClientConfig.enabled){var r={rejectUnauthorized:!1,transports:"undefined"!=typeof document?["polling","websocket"]:["websocket"]},n=u((i||f.ClientConfig.defaultUri||"")+"/pxt-cloud"+(o?"/"+o:""),r);(s._socket=n).on("connect",function(){s._debug("client connected"),s._onConnect(n),t(s)}),n.on("disconnect",function(){s._debug("client disconnected"),s._onDisconnect(n)}),n.on("connect_error",function(t){s._debug("client connect failed ["+("string"==typeof t?t:t.message)+"]")}),n.on("reconnecting",function(t){s._debug("client reconnecting with attempt "+t)}),n.on("reconnect_failed",function(){s._debug("lient max retry attempts reached")}),n.on("error",function(t){s._debug("client failed ["+("string"==typeof t?t:t.message)+"]"),e(t)})}else t()})},s.prototype.dispose=function(){if(this._socket){var t=c(this._socket.io.uri),e=this._socket.nsp;this._socket.close(),this._socket=null,delete u.managers[t.id].nsps[e]}},s.prototype._onConnect=function(t){},s.prototype._onDisconnect=function(t){},s.prototype._promiseEvent=function(e){for(var i=this,o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return new a(function(r,n){var t;i.socket?(t=i.socket).emit.apply(t,[e].concat(o,[function(t,e){t?n(t):r(e)}])):n(s._errorNotConnected)})},s.prototype._notifyEvent=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit.apply(this,[t].concat(e))},s.prototype._onNotifyReceivedEvent=function(r,t){var n=this;t.on(r,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n._notifyEvent.apply(n,[r].concat(t))})},s.prototype._offNotifyReceivedEvent=function(t,e){e.off(t)},s._errorNotConnected=new Error("No client connection."),s}(o.EventEmitter);r.Client=s},{"./client.config":2,bluebird:14,events:34,"socket.io-client":45,"socket.io-client/lib/url":49}],6:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0});var i=t("./client.chat"),o=t("./client.config"),s=t("./client.users"),a=t("./client.world");n(t("./client_")),n(t("./client.config")),n(t("./client.chat")),n(t("./client.users")),n(t("./client.world"));t("debug")("pxt-cloud:clients");r.makeAPIConnection=function(e){return new Promise(function(r,t){if(o.ClientConfig.enabled){var n={chat:new i.ChatClient,users:new s.UsersClient,world:new a.WorldClient};Promise.all([n.chat.connect(e),n.users.connect(e),n.world.connect(e)]).then(function(t){var e={chat:t[0],users:t[1],world:t[2],dispose:function(){return Object.keys(n).forEach(function(t){return n[t].dispose()})}};r(e)}).catch(t)}else r()})},r.disposeAPIConnection=function(t){var e=t.dispose;void 0!==e&&"function"==typeof e&&e()}},{"./client.chat":1,"./client.config":2,"./client.users":3,"./client.world":4,"./client_":5,debug:20}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(t("./clients"))},{"./clients":6}],8:[function(t,e,r){function s(){}e.exports=function(t,r,n){var i=!1;return n=n||s,0===(o.count=t)?r():o;function o(t,e){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,r(t),r=n):0!==o.count||i||r(null,e)}}},{}],9:[function(t,e,r){e.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),n<r&&(r=n),n<=e||r<=e||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)o[a]=i[s];return o.buffer}},{}],10:[function(t,e,r){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}(e.exports=n).prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},{}],11:[function(t,e,r){!function(){"use strict";for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=new Uint8Array(256),t=0;t<o.length;t++)h[o.charCodeAt(t)]=t;r.encode=function(t){var e,r=new Uint8Array(t),n=r.length,i="";for(e=0;e<n;e+=3)i+=o[r[e]>>2],i+=o[(3&r[e])<<4|r[e+1]>>4],i+=o[(15&r[e+1])<<2|r[e+2]>>6],i+=o[63&r[e+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var e,r,n,i,o,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(e=0;e<a;e+=4)r=h[t.charCodeAt(e)],n=h[t.charCodeAt(e+1)],i=h[t.charCodeAt(e+2)],o=h[t.charCodeAt(e+3)],f[u++]=r<<2|n>>4,f[u++]=(15&n)<<4|i>>2,f[u++]=(3&i)<<6|63&o;return c}}()},{}],12:[function(t,e,r){"use strict";r.byteLength=function(t){var e=p(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){for(var e,r=p(t),n=r[0],i=r[1],o=new l((c=n,f=i,3*(c+f)/4-f)),s=0,a=0<i?n-4:n,u=0;u<a;u+=4)e=h[t.charCodeAt(u)]<<18|h[t.charCodeAt(u+1)]<<12|h[t.charCodeAt(u+2)]<<6|h[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;var c,f;2===i&&(e=h[t.charCodeAt(u)]<<2|h[t.charCodeAt(u+1)]>>4,o[s++]=255&e);1===i&&(e=h[t.charCodeAt(u)]<<10|h[t.charCodeAt(u+1)]<<4|h[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e);return o},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(u(t,o,s<o+16383?s:o+16383));1===n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],h=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],h[n.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[(i=n)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],13:[function(t,u,e){(function(t){var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,e=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=e&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),n=i&&i.prototype.append&&i.prototype.getBlob;function o(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var i=new Uint8Array(r.byteLength);i.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=i.buffer}t[e]=n}}}function s(t,e){e=e||{};var r=new i;o(t);for(var n=0;n<t.length;n++)r.append(t[n]);return e.type?r.getBlob(e.type):r.getBlob()}function a(t,e){return o(t),new Blob(t,e||{})}u.exports=e?r?t.Blob:a:n?s:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,r,n){(function(U,a,u){!function(t){if("object"==typeof n&&void 0!==r)r.exports=t();else if("function"==typeof b&&b.amd)b([],t);else{var e;"undefined"!=typeof window?e=window:void 0!==a?e=a:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,r;return function o(s,a,u){function c(r,t){if(!a[r]){if(!s[r]){var e="function"==typeof _dereq_&&_dereq_;if(!t&&e)return e(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[r]={exports:{}};s[r][0].call(i.exports,function(t){var e=s[r][1][t];return c(e||t)},i,i.exports,o,s,a,u)}return a[r].exports}for(var f="function"==typeof _dereq_&&_dereq_,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";e.exports=function(t){var n=t._SomePromiseArray;function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";var n;try{throw new Error}catch(t){n=t}var i=t("./schedule.js"),o=t("./queue.js"),s=t("./util.js");function a(){this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=i.isStatic?i(this.drainQueues):i}function u(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function c(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function f(t){this._normalQueue._pushOne(t),this._queueTick()}a.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},a.prototype.haveItemsQueued=function(){return 0<this._normalQueue.length()},a.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},s.hasDevTools?(i.isStatic&&(i=function(t){setTimeout(t,0)}),a.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?u.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},a.prototype.invoke=function(t,e,r){this._trampolineEnabled?c.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},a.prototype.settlePromises=function(t){this._trampolineEnabled?f.call(this,t):this._schedule(function(){t._settlePromises()})}):(a.prototype.invokeLater=u,a.prototype.invoke=c,a.prototype.settlePromises=f),a.prototype.invokeFirst=function(t,e,r){this._normalQueue.unshift(t,e,r),this._queueTick()},a.prototype._drainQueue=function(t){for(;0<t.length();){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},e.exports=new a,e.exports.firstLineError=n},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,e,r){"use strict";e.exports=function(o,s,a){var r=function(t,e){this._reject(e)},u=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},c=function(t,e){this._isPending()&&this._resolveCallback(e.target)},f=function(t,e){e.promiseRejectionQueued||this._reject(t)};o.prototype.bind=function(t){var e=a(t),r=new o(s);r._propagateFrom(this,1);var n=this._target();if(r._setBoundTo(e),e instanceof o){var i={promiseRejectionQueued:!1,promise:r,target:n,bindingPromise:e};n._then(s,u,r._progress,r,i),e._then(c,f,r._progress,r,i)}else r._resolveCallback(n);return r},o.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},o.prototype._isBound=function(){return 131072==(131072&this._bitField)},o.bind=function(t,e){var r=a(t),n=new o(s);return n._setBoundTo(r),r instanceof o?r._then(function(){n._resolveCallback(e)},n._reject,n._progress,n,null):n._resolveCallback(e),n}}},{}],4:[function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=t("./promise.js")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(t){}return i},e.exports=i},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(i){var n,o=t("./util.js"),s=o.canEvaluate;o.isIdentifier;function e(t,e){var r;if(null!=t&&(r=t[e]),"function"!=typeof r){var n="Object "+o.classString(t)+" has no method '"+o.toString(e)+"'";throw new i.TypeError(n)}return r}function a(t){return e(t,this.pop()).apply(t,this)}function u(t){return t[this]}function c(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}i.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),n=1;n<e;++n)r[n-1]=arguments[n];return r.push(t),this._then(a,void 0,void 0,r,void 0)},i.prototype.get=function(t){var e;if("number"==typeof t)e=c;else if(s){var r=n(t);e=null!==r?r:u}else e=u;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(i,t,e){"use strict";t.exports=function(t){var e=i("./errors.js"),r=i("./async.js"),n=e.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},t.prototype.cancel=function(t){return this.isCancellable()&&(void 0===t&&(t=new n),r.invokeLater(this._cancel,this,t)),this},t.prototype.cancellable=function(){return this._cancellable()||(r.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0),this},t.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},t.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(t,e,r){"use strict";e.exports=function(){var i,a=t("./async.js"),s=t("./util.js"),f=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,u=null,o=null,c=!1;function h(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);n(this,h),32<e&&this.uncycle()}function l(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=u.test(n)||"    (No stack trace)"===n,o=i&&d(n);i&&!o&&(c&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function p(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}s.inherits(h,Error),h.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;for(n=(t=this._length=n)-1;0<=n;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<t;++n){var s=r[e[n].stack];if(void 0!==s&&s!==n){0<s&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var a=0<n?e[n-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=n-2;0<=c;--c)e[c]._length=u,u++;return}}}},h.prototype.parent=function(){return this._parent},h.prototype.hasParent=function(){return void 0!==this._parent},h.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=h.parseStackAndMessage(t),r=e.message,n=[e.stack],i=this;void 0!==i;)n.push(l(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;0<=a;--a)if(n[a]===o){s=a;break}for(var a=s;0<=a;--a){var u=n[a];if(e[i]!==u)break;e.pop(),i--}e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),s.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");r<e.length&&(e[r]=e[r].join("\n"));return t+"\n"+e.join("\n")}(r,n)),s.notEnumerableProp(t,"__stackCleaned__",!0)}},h.parseStackAndMessage=function(t){var e=t.stack;return{message:t.toString(),stack:l(e="string"==typeof e&&0<e.length?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||u.test(n))break}return 0<r&&(e=e.slice(r)),e}(t):["    (No stack trace)"])}},h.formatAndLogError=function(t,e){if("undefined"!=typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+o(n,t)}else r=e+String(t);"function"==typeof i?i(r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}},h.unhandledRejection=function(t){h.formatAndLogError(t,"^--- With additional stack trace: ")},h.isSupported=function(){return"function"==typeof n},h.fireRejectionEvent=function(t,e,r,n){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(n):e(r,n))}catch(t){a.throwLater(t)}var o=!1;try{o=g(t,r,n)}catch(t){o=!0,a.throwLater(t)}var s=!1;if(v)try{s=v(t.toLowerCase(),{reason:r,promise:n})}catch(t){s=!0,a.throwLater(t)}o||i||s||"unhandledRejection"!==t||h.formatAndLogError(r,"Unhandled rejection ")};var d=function(){return!1},r=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function y(t){var e=t.match(r);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}h.setBounds=function(t,e){if(h.isSupported()){for(var r,n,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){if(c=y(i[u])){r=c.fileName,s=c.line;break}}for(u=0;u<o.length;++u){var c;if(c=y(o[u])){n=c.fileName,a=c.line;break}}s<0||a<0||!r||!n||r!==n||a<=s||(d=function(t){if(f.test(t))return!0;var e=y(t);return!!(e&&e.fileName===r&&s<=e.line&&e.line<=a)})}};var v,n=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():p(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,u=t,o=e;var r=Error.captureStackTrace;return d=function(t){return f.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return u=/@/,o=e,c=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return"stack"in i||!n||"number"!=typeof Error.stackTraceLimit?(o=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?p(e):e.toString()},null):(u=t,o=e,function(e){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),g=function(){if(s.isNode)return function(t,e,r){return"rejectionHandled"===t?U.emit(t,r):U.emit(t,e,r)};var n=!1,e=!0;try{var t=new self.CustomEvent("test");n=t instanceof CustomEvent}catch(t){}if(!n)try{var r=document.createEvent("CustomEvent");r.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(r)}catch(t){e=!1}e&&(v=function(t,e){var r;return n?r=new self.CustomEvent(t,{detail:e,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!0,e),!!r&&!self.dispatchEvent(r)});var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=o[t],i=self[n];return!!i&&("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(i=function(t){console.warn(t)},s.isNode&&U.stderr.isTTY?i=function(t){U.stderr.write("[31m"+t+"[39m\n")}:s.isNode||"string"!=typeof(new Error).stack||(i=function(t){console.warn("%c"+t,"color: red")})),h}},{"./async.js":2,"./util.js":38}],8:[function(n,t,e){"use strict";t.exports=function(l){var t=n("./util.js"),e=n("./errors.js"),p=t.tryCatch,d=t.errorObj,y=n("./es5.js").keys,v=e.TypeError;function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}return r.prototype.doFilter=function(t){for(var e,r,n,i=this._callback,o=this._promise._boundValue(),s=0,a=this._instances.length;s<a;++s){var u=this._instances[s],c=u===Error||null!=u&&u.prototype instanceof Error;if(c&&t instanceof u)return(f=p(i).call(o,t))===d?(l.e=f.e,l):f;if("function"==typeof u&&!c){var f,h=(e=t,void 0,r={},(n=p(u).call(r,e))===d?n:y(r).length?(d.e=new v("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),d):n);if(h===d){t=d.e;break}if(h)return(f=p(i).call(o,t))===d?(l.e=f.e,l):f}}return l.e=t,l},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=[];function i(){this._trace=new e(o())}function o(){var t=n.length-1;if(0<=t)return n[t]}return i.prototype._pushContext=function(){r()&&void 0!==this._trace&&n.push(this._trace)},i.prototype._popContext=function(){r()&&void 0!==this._trace&&n.pop()},t.prototype._peekContext=o,t.prototype._pushContext=i.prototype._pushContext,t.prototype._popContext=i.prototype._popContext,function(){if(r())return new i}}},{}],10:[function(f,t,e){"use strict";t.exports=function(t,i){var r,n,o=t._getDomain,e=f("./async.js"),s=f("./errors.js").Warning,a=f("./util.js"),u=a.canAttachTrace,c=a.isNode&&(!!U.env.BLUEBIRD_DEBUG||"development"===U.env.NODE_ENV);return a.isNode&&0==U.env.BLUEBIRD_DEBUG&&(c=!1),c&&e.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),e.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){i.fireRejectionEvent("rejectionHandled",r,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),i.fireRejectionEvent("unhandledRejection",n,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return 0<(524288&this._bitField)},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return 0<(2097152&this._bitField)},t.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},t.prototype._isCarryingStackTrace=function(){return 0<(1048576&this._bitField)},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(){return c&&(this._trace=new i(this._peekContext())),this},t.prototype._attachExtraTrace=function(t,e){if(c&&u(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=i.parseStackAndMessage(t);a.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),a.notEnumerableProp(t,"__stackCleaned__",!0)}}},t.prototype._warn=function(t){var e=new s(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var n=i.parseStackAndMessage(e);e.stack=n.message+"\n"+n.stack.join("\n")}i.formatAndLogError(e,"")},t.onPossiblyUnhandledRejection=function(t){var e=o();n="function"==typeof t?null===e?t:e.bind(t):void 0},t.onUnhandledRejectionHandled=function(t){var e=o();r="function"==typeof t?null===e?t:e.bind(t):void 0},t.longStackTraces=function(){if(e.haveItemsQueued()&&!1===c)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(c=i.isSupported())&&e.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return c&&i.isSupported()},i.isSupported()||(t.longStackTraces=function(){},c=!1),function(){return c}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var a=t("./util.js").isPrimitive;e.exports=function(e){var r=function(){return this},n=function(){throw this},i=function(){},o=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};e.prototype.return=e.prototype.thenReturn=function(t){return void 0===t?this.then(i):a(t)?this._then(s(t,2),void 0,void 0,void 0,void 0):(t instanceof e&&t._ignoreRejections(),this._then(r,void 0,void 0,t,void 0))},e.prototype.throw=e.prototype.thenThrow=function(t){return void 0===t?this.then(o):a(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,r){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,r)},t.each=function(t,e){return n(t,e,null,r)}}},{}],13:[function(t,e,r){"use strict";var n,i,o=t("./es5.js"),s=o.freeze,a=t("./util.js"),u=a.inherits,c=a.notEnumerableProp;function f(e,r){function n(t){if(!(this instanceof n))return new n(t);c(this,"message","string"==typeof t?t:r),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var h=f("Warning","warning"),l=f("CancellationError","cancellation error"),p=f("TimeoutError","timeout error"),d=f("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(t){n=f("TypeError","type error"),i=f("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<y.length;++v)"function"==typeof Array.prototype[y[v]]&&(d.prototype[y[v]]=Array.prototype[y[v]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;function m(t){if(!(this instanceof m))return new m(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(n=i.join("\n"))+"\n"}return g--,e},u(m,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:l,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:d}),c(Error,"__BluebirdErrorTypes__",_)),e.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,n){var i=t.map;t.prototype.filter=function(t,e){return i(this,t,e,n)},t.filter=function(t,e,r){return i(t,e,r,n)}}},{}],16:[function(e,t,r){"use strict";t.exports=function(o,s,a){var t=e("./util.js"),u=t.isPrimitive,c=t.thrower;function f(){return this}function h(){throw this}function l(t,e,r){var n,i,o;return n=u(e)?r?(o=e,function(){return o}):(i=e,function(){throw i}):r?f:h,t._then(n,c,void 0,e,void 0)}function n(t){var e=this.promise,r=this.handler,n=e._isBound()?r.call(e._boundValue()):r();if(void 0!==n){var i=a(n,e);if(i instanceof o)return l(i=i._target(),t,e.isFulfilled())}return e.isRejected()?(s.e=t,s):t}function i(t){var e=this.promise,r=this.handler,n=e._isBound()?r.call(e._boundValue(),t):r(t);if(void 0!==n){var i=a(n,e);if(i instanceof o)return l(i=i._target(),t,!0)}return t}o.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?n:i,e?n:void 0,void 0,r,void 0)},o.prototype.lastly=o.prototype.finally=function(t){return this._passThroughHandler(t,!0)},o.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(e,t,r){"use strict";t.exports=function(a,n,i,u){var s=e("./errors.js").TypeError,t=e("./util.js"),c=t.errorObj,f=t.tryCatch,o=[];function h(t,e,r,n){(this._promise=new a(i))._captureStackTrace(),this._stack=n,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(o):o}h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},h.prototype._continue=function(t){if(t===c)return this._promise._rejectCallback(t.e,!1,!0);var e=t.value;if(!0===t.done)this._promise._resolveCallback(e);else{var r=u(e,this._promise);if(!(r instanceof a)&&null===(r=function(t,e,r){for(var n=0;n<e.length;++n){r._pushContext();var i=f(e[n])(t);if(r._popContext(),i===c){r._pushContext();var o=a.reject(c.e);return r._popContext(),o}var s=u(i,r);if(s instanceof a)return s}return null}(r,this._yieldHandlers,this._promise)))return void this._throw(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",e)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},h.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},a.coroutine=function(r,t){if("function"!=typeof r)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(t).yieldHandler,i=h,o=(new Error).stack;return function(){var t=r.apply(this,arguments),e=new i(void 0,void 0,n,o);return e._generator=t,e._next(void 0),e.promise()}},a.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("fn must be a function\n\n    See http://goo.gl/916lJJ\n");o.push(t)},a.spawn=function(t){if("function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var e=new h(t,this),r=e.promise();return e._run(a.spawn),r}}},{"./errors.js":13,"./util.js":38}],18:[function(i,t,e){"use strict";t.exports=function(t,s,e,r){var n=i("./util.js");n.canEvaluate,n.tryCatch,n.errorObj;t.join=function(){var t,e=arguments.length-1;0<e&&"function"==typeof arguments[e]&&(t=arguments[e]);for(var r=arguments.length,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i];t&&n.pop();var o=new s(n).promise();return void 0!==t?o.spread(t):o}}},{"./util.js":38}],19:[function(r,t,e){"use strict";t.exports=function(f,t,i,h,o){var s=f._getDomain,a=r("./async.js"),e=r("./util.js"),l=e.tryCatch,p=e.errorObj,d={},u=[];function c(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:i.bind(e),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=1<=r?[]:u,a.invoke(y,this,void 0)}function y(){this._init$(void 0,-2)}function v(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return new c(t,e,i="number"==typeof i&&isFinite(i)&&1<=i?i:0,n)}e.inherits(c,t),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){var r=this._values,n=this.length(),i=this._preservedValues,o=this._limit;if(r[e]===d){if(r[e]=t,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=o&&this._inFlight>=o)return r[e]=t,void this._queue.push(e);null!==i&&(i[e]=t);var s=this._callback,a=this._promise._boundValue();this._promise._pushContext();var u=l(s).call(a,t,e,n);if(this._promise._popContext(),u===p)return this._reject(u.e);var c=h(u,this._promise);if(c instanceof f){if((c=c._target())._isPending())return 1<=o&&this._inFlight++,r[e]=d,c._proxyPromiseArray(this,e);if(!c._isFulfilled())return this._reject(c._reason());u=c._value()}r[e]=u}n<=++this._totalResolved&&(null!==i?this._filter(r,i):this._resolve(r))},c.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;0<t.length&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},c.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;o<r;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},c.prototype.preservedValues=function(){return this._preservedValues},f.prototype.map=function(t,e){return"function"!=typeof t?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):v(this,t,e,null).promise()},f.map=function(t,e,r,n){return"function"!=typeof e?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):v(t,e,r,n).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(e,t,r){"use strict";t.exports=function(o,s,t,a){var u=e("./util.js"),c=u.tryCatch;o.method=function(r){if("function"!=typeof r)throw new o.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var t=new o(s);t._captureStackTrace(),t._pushContext();var e=c(r).apply(this,arguments);return t._popContext(),t._resolveFromSyncValue(e),t}},o.attempt=o.try=function(t,e,r){if("function"!=typeof t)return a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var n=new o(s);n._captureStackTrace(),n._pushContext();var i=u.isArray(e)?c(t).apply(r,e):c(t).call(r,e);return n._popContext(),n._resolveFromSyncValue(i),n},o.prototype._resolveFromSyncValue=function(t){t===u.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(e,t,r){"use strict";t.exports=function(t){var n=e("./util.js"),i=e("./async.js"),o=n.tryCatch,s=n.errorObj;function a(t,e){if(!n.isArray(t))return u.call(this,t,e);var r=o(e).apply(this._boundValue(),[null].concat(t));r===s&&i.throwLater(r.e)}function u(t,e){var r=this._boundValue(),n=void 0===t?o(e).call(r,null):o(e).call(r,null,t);n===s&&i.throwLater(n.e)}function c(t,e){if(!t){var r=this._target()._getCarriedStackTrace();r.cause=t,t=r}var n=o(e).call(this._boundValue(),t);n===s&&i.throwLater(n.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var r=u;void 0!==e&&Object(e).spread&&(r=a),this._then(r,c,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(a,u){var c=t("./util.js"),f=t("./async.js"),h=c.tryCatch,l=c.errorObj;a.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},a.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},a.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},a.prototype._doProgressWith=function(t){var e=t.value,r=t.handler,n=t.promise,i=t.receiver,o=h(r).call(i,e);if(o===l){if(null!=o.e&&"StopProgressPropagation"!==o.e.name){var s=c.canAttachTrace(o.e)?o.e:new Error(c.toString(o.e));n._attachExtraTrace(s),n._progress(o.e)}}else o instanceof a?o._then(n._progress,null,null,n,void 0):n._progress(o)},a.prototype._progressUnchecked=function(t){for(var e=this._length(),r=this._progress,n=0;n<e;n++){var i=this._progressHandlerAt(n),o=this._promiseAt(n);if(o instanceof a)"function"==typeof i?f.invoke(this._doProgressWith,this,{handler:i,promise:o,receiver:this._receiverAt(n),value:t}):f.invoke(r,o,t);else{var s=this._receiverAt(n);"function"==typeof i?i.call(s,t,o):s instanceof u&&!s._isResolved()&&s._promiseProgressed(t,o)}}}}},{"./async.js":2,"./util.js":38}],23:[function(j,x,t){"use strict";x.exports=function(){var c,a=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},t=function(){return new E.PromiseInspection(this._target())},e=function(t){return E.reject(new h(t))},o=j("./util.js");c=o.isNode?function(){var t=U.domain;return void 0===t&&(t=null),t}:function(){return null},o.notEnumerableProp(E,"_getDomain",c);var u={},f=j("./async.js"),r=j("./errors.js"),h=E.TypeError=r.TypeError;E.RangeError=r.RangeError,E.CancellationError=r.CancellationError,E.TimeoutError=r.TimeoutError,E.OperationalError=r.OperationalError,E.RejectionError=r.OperationalError,E.AggregateError=r.AggregateError;var l=function(){},s={},p={e:null},d=j("./thenables.js")(E,l),y=j("./promise_array.js")(E,l,d,e),n=j("./captured_trace.js")(),i=j("./debuggability.js")(E,n),v=j("./context.js")(E,n,i),g=j("./catch_filter.js")(p),m=j("./promise_resolver.js"),_=m._nodebackForPromise,b=o.errorObj,w=o.tryCatch;function E(t){if("function"!=typeof t)throw new h("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==E)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==l&&this._resolveFromResolver(t)}function k(t){var e=new E(l);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}return E.prototype.toString=function(){return"[object Promise]"},E.prototype.caught=E.prototype.catch=function(t){var e=arguments.length;if(1<e){var r,n=new Array(e-1),i=0;for(r=0;r<e-1;++r){var o=arguments[r];if("function"!=typeof o)return E.reject(new h("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));n[i++]=o}n.length=i,t=arguments[r];var s=new g(n,t,this);return this._then(void 0,s.doFilter,void 0,s,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},E.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},E.prototype.then=function(t,e,r){if(i()&&0<arguments.length&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+o.classString(t);1<arguments.length&&(n+=", "+o.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},E.prototype.done=function(t,e,r){this._then(t,e,r,void 0,void 0)._setIsFinal()},E.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,s,void 0)},E.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},E.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},E.prototype.all=function(){return new y(this).promise()},E.prototype.error=function(t){return this.caught(o.originatesFromRejection,t)},E.getNewLibraryCopy=x.exports,E.is=function(t){return t instanceof E},E.fromNode=function(t){var e=new E(l),r=w(t)(_(e));return r===b&&e._rejectCallback(r.e,!0,!0),e},E.all=function(t){return new y(t).promise()},E.defer=E.pending=function(){var t=new E(l);return new m(t)},E.resolve=E.fulfilled=E.cast=function(t){var e=d(t);if(!(e instanceof E)){var r=e;(e=new E(l))._fulfillUnchecked(r)}return e},E.reject=E.rejected=function(t){var e=new E(l);return e._captureStackTrace(),e._rejectCallback(t,!0),e},E.setScheduler=function(t){if("function"!=typeof t)throw new h("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=f._schedule;return f._schedule=t,e},E.prototype._then=function(t,e,r,n,i){var o=void 0!==i,s=o?i:new E(l);o||(s._propagateFrom(this,5),s._captureStackTrace());var a=this._target();a!==this&&(void 0===n&&(n=this._boundTo),o||s._setIsMigrated());var u=a._addCallbacks(t,e,r,s,n,c());return a._isResolved()&&!a._isSettlePromisesQueued()&&f.invoke(a._settlePromiseAtPostResolution,a,u),s},E.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},E.prototype._length=function(){return 131071&this._bitField},E.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(939524096&this._bitField)},E.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},E.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},E.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},E.prototype._setRejected=function(){this._bitField=134217728|this._bitField},E.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},E.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},E.prototype._isFinal=function(){return 0<(33554432&this._bitField)},E.prototype._cancellable=function(){return 0<(67108864&this._bitField)},E.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},E.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},E.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},E.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},E.prototype._isMigrated=function(){return 0<(4194304&this._bitField)},E.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==u)return void 0===e&&this._isBound()?this._boundValue():e},E.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},E.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},E.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},E.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof E?t.isFulfilled()?t.value():void 0:t},E.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),i=t._progressHandlerAt(e),o=t._promiseAt(e),s=t._receiverAt(e);o instanceof E&&o._setIsMigrated(),void 0===s&&(s=u),this._addCallbacks(r,n,i,o,s,null)},E.prototype._addCallbacks=function(t,e,r,n,i,o){var s=this._length();if(131066<=s&&(s=0,this._setLength(0)),0===s)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof r&&(this._progressHandler0=null===o?r:o.bind(r));else{var a=5*s-5;this[a+3]=n,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof r&&(this[a+2]=null===o?r:o.bind(r))}return this._setLength(s+1),s},E.prototype._setProxyHandlers=function(t,e){var r=this._length();if(131066<=r&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},E.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},E.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(a(),!1,!0);var r=d(t,this);if(!(r instanceof E))return this._fulfill(t);var n=1|(e?4:0);this._propagateFrom(r,n);var i=r._target();if(i._isPending()){for(var o=this._length(),s=0;s<o;++s)i._migrateCallbacks(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},E.prototype._rejectCallback=function(t,e,r){r||o.markAsOriginatingFromRejection(t);var n=o.ensureErrorObject(t),i=n===t;this._attachExtraTrace(n,!!e&&i),this._reject(t,i?void 0:n)},E.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=w(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===b&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},E.prototype._settlePromiseFromHandler=function(t,e,r,n){var i;if(!n._isRejected())if(n._pushContext(),i=e!==s||this._isRejected()?w(t).call(e,r):w(t).apply(this._boundValue(),r),n._popContext(),i===b||i===n||i===p){var o=i===n?a():i.e;n._rejectCallback(o,!1,!0)}else n._resolveCallback(i)},E.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},E.prototype._followee=function(){return this._rejectionHandler0},E.prototype._setFollowee=function(t){this._rejectionHandler0=t},E.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},E.prototype._propagateFrom=function(t,e){0<(1&e)&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),0<(4&e)&&t._isBound()&&this._setBoundTo(t._boundTo)},E.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},E.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},E.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof E;if(r&&e._isMigrated())return e._unsetIsMigrated(),f.invoke(this._settlePromiseAt,this,t);var n=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),i=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,o=this._settledValue,s=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof n?r?this._settlePromiseFromHandler(n,s,o,e):n.call(s,o,e):s instanceof y?s._isResolved()||(this._isFulfilled()?s._promiseFulfilled(o,e):s._promiseRejected(o,e)):r&&(this._isFulfilled()?e._fulfill(o):e._reject(o,i)),4<=t&&4==(31&t)&&f.invokeLater(this._setLength,this,0)},E.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},E.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},E.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},E.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},E.prototype._queueSettlePromises=function(){f.settlePromises(this),this._setSettlePromisesQueued()},E.prototype._fulfillUnchecked=function(t){if(t===this){var e=a();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),0<this._length()&&this._queueSettlePromises()},E.prototype._rejectUncheckedCheckError=function(t){var e=o.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},E.prototype._rejectUnchecked=function(t,e){if(t===this){var r=a();return this._attachExtraTrace(r),this._rejectUnchecked(r)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?f.throwLater(function(t){throw"stack"in t&&f.invokeFirst(n.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),0<this._length()?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},E.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},o.notEnumerableProp(E,"_makeSelfResolutionError",a),j("./progress.js")(E,y),j("./method.js")(E,l,d,e),j("./bind.js")(E,l,d),j("./finally.js")(E,p,d),j("./direct_resolve.js")(E),j("./synchronous_inspection.js")(E),j("./join.js")(E,y,d,l),E.version="2.11.0",E.Promise=E,j("./map.js")(E,y,e,d,l),j("./cancel.js")(E),j("./using.js")(E,e,d,v),j("./generators.js")(E,e,l,d),j("./nodeify.js")(E),j("./call_get.js")(E),j("./props.js")(E,y,d,e),j("./race.js")(E,l,d,e),j("./reduce.js")(E,y,e,d,l),j("./settle.js")(E,y),j("./some.js")(E,y,e),j("./promisify.js")(E,l),j("./any.js")(E),j("./each.js")(E,l),j("./timers.js")(E,l),j("./filter.js")(E,l),o.toFastProperties(E),o.toFastProperties(E.prototype),k({a:1}),k({b:2}),k({c:3}),k(1),k(function(){}),k(void 0),k(!1),k(new E(l)),n.setBounds(f.firstLineError,o.lastLineError),E}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(e,t,r){"use strict";t.exports=function(f,n,h,l){var p=e("./util.js").isArray;function t(t){var e,r=this._promise=new f(n);t instanceof f&&(e=t,r._propagateFrom(e,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function t(e,r){var n=h(this._values,this._promise);if(n instanceof f){if(n=n._target(),!(this._values=n)._isFulfilled())return n._isPending()?void n._then(t,this._reject,void 0,this,r):void this._reject(n._reason());if(n=n._value(),!p(n)){var i=new f.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(i)}}else if(!p(n))return void this._promise._reject(l("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==n.length){var o=this.getActualLength(n.length);this._length=o,this._values=this.shouldCopyValues()?new Array(o):this._values;for(var s=this._promise,a=0;a<o;++a){var u=this._isResolved(),c=h(n[a],s);c instanceof f?(c=c._target(),u?c._ignoreRejections():c._isPending()?c._proxyPromiseArray(this,a):c._isFulfilled()?this._promiseFulfilled(c._value(),a):this._promiseRejected(c._reason(),a)):u||this._promiseFulfilled(c,a)}}else-5===r?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(r))},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},t.prototype.__hardReject__=t.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},t.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},t.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},t.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(t){return t},t}},{"./util.js":38}],25:[function(t,e,r){"use strict";var s=t("./util.js"),a=s.maybeWrapAsError,n=t("./errors.js"),i=n.TimeoutError,u=n.OperationalError,o=s.haveGetters,c=t("./es5.js");var f,h=/^(?:name|message|stack|cause)$/;function l(t){var e,r;if((r=t)instanceof Error&&c.getPrototypeOf(r)===Error.prototype){(e=new u(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),i=0;i<n.length;++i){var o=n[i];h.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function p(s){return function(t,e){if(null!==s){if(t){var r=l(a(t));s._attachExtraTrace(r),s._reject(r)}else if(2<arguments.length){for(var n=arguments.length,i=new Array(n-1),o=1;o<n;++o)i[o-1]=arguments[o];s._fulfill(i)}else s._fulfill(e);s=null}}}if(f=o?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=p(t),this.callback=this.asCallback},o){var d={get:function(){return p(this.promise)}};c.defineProperty(f.prototype,"asCallback",d),c.defineProperty(f.prototype,"callback",d)}f._nodebackForPromise=p,f.prototype.toString=function(){return"[object PromiseResolver]"},f.prototype.resolve=f.prototype.fulfill=function(t){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},f.prototype.reject=function(t){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},f.prototype.progress=function(t){if(!(this instanceof f))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},f.prototype.cancel=function(t){this.promise.cancel(t)},f.prototype.timeout=function(){this.reject(new i("timeout"))},f.prototype.isResolved=function(){return this.promise.isResolved()},f.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=f},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(n,t,e){"use strict";t.exports=function(u,c){var l={},d=n("./util.js"),f=n("./promise_resolver.js")._nodebackForPromise,h=d.withAppended,p=d.maybeWrapAsError,t=d.canEvaluate,y=n("./errors").TypeError,v={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),g=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function o(t){return!e.test(t)}function m(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function _(t,e,r,n){for(var i,o,s,a,u=d.inheritedDataKeys(t),c=[],f=0;f<u.length;++f){var h=u[f],l=t[h],p=n===g||g(h,l,t);"function"!=typeof l||m(l)||(i=t,o=h,s=e,void 0,(a=d.getDataPropertyOrDefault(i,o+s,v))&&m(a))||!n(h,l,t,p)||c.push(h,l)}return function(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}(c,e,r),c}var r,b=function(t){return t.replace(/([$])/,"\\$")};var w=t?r:function(i,o,t,e){var s=function(){return this}(),a=i;function r(){var t=o;o===l&&(t=this);var e=new u(c);e._captureStackTrace();var r="string"==typeof a&&this!==s?this[a]:i,n=f(e);try{r.apply(t,h(arguments,n))}catch(t){e._rejectCallback(p(t),!0,!0)}return e}return"string"==typeof a&&(i=e),d.notEnumerableProp(r,"__isPromisified__",!0),r};function E(t,e,r,n){for(var i=new RegExp(b(e)+"$"),o=_(t,e,i,r),s=0,a=o.length;s<a;s+=2){var u=o[s],c=o[s+1],f=u+e;if(n===w)t[f]=w(u,l,u,c,e);else{var h=n(c,function(){return w(u,l,u,c,e)});d.notEnumerableProp(h,"__isPromisified__",!0),t[f]=h}}return d.toFastProperties(t),t}u.promisify=function(t,e){if("function"!=typeof t)throw new y("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(m(t))return t;var r,n,i=(r=t,n=arguments.length<2?l:e,w(r,n,void 0,r));return d.copyDescriptors(t,i,o),i},u.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var r=(e=Object(e)).suffix;"string"!=typeof r&&(r="Async");var n=e.filter;"function"!=typeof n&&(n=g);var i=e.promisifier;if("function"!=typeof i&&(i=w),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=d.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&d.isClass(a)&&(E(a.prototype,r,n,i),E(a,r,n,i))}return E(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(c,t,e){"use strict";t.exports=function(n,t,i,o){var e=c("./util.js"),s=e.isObject,a=c("./es5.js");function u(t){for(var e=a.keys(t),r=e.length,n=new Array(2*r),i=0;i<r;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function r(t){var e,r=i(t);return s(r)?(e=r instanceof n?r._then(n.props,void 0,void 0,void 0,void 0):new u(r).promise(),r instanceof n&&e._propagateFrom(r,4),e):o("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}e.inherits(u,t),u.prototype._init=function(){this._init$(void 0,-3)},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var r={},n=this.length(),i=0,o=this.length();i<o;++i)r[this._values[i+n]]=this._values[i];this._resolve(r)}},u.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},n.prototype.props=function(){return r(this)},n.props=function(t){return r(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=(this._front-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},n.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},n.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],29:[function(t,e,r){"use strict";e.exports=function(c,f,h,l){var p=t("./util.js").isArray,d=function(e){return e.then(function(t){return r(t,e)})};function r(t,e){var r=h(t);if(r instanceof c)return d(r);if(!p(t))return l("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var n=new c(f);void 0!==e&&n._propagateFrom(e,5);for(var i=n._fulfill,o=n._reject,s=0,a=t.length;s<a;++s){var u=t[s];(void 0!==u||s in t)&&c.cast(u)._then(i,o,void 0,n,null)}return n}c.race=function(t){return r(t,void 0)},c.prototype.race=function(){return r(this,void 0)}}},{"./util.js":38}],30:[function(r,t,e){"use strict";t.exports=function(d,t,i,y,u){var c=d._getDomain,f=r("./async.js"),e=r("./util.js"),v=e.tryCatch,g=e.errorObj;function o(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=n===u?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var i=y(r,this._promise),o=!1,s=i instanceof d;s&&((i=i._target())._isPending()?i._proxyPromiseArray(this,-1):i._isFulfilled()?(r=i._value(),this._gotAccum=!0):(this._reject(i._reason()),o=!0)),s||this._zerothIsAccum||(this._gotAccum=!0);var a=c();this._callback=null===a?e:a.bind(e),this._accum=r,o||f.invoke(h,this,void 0)}function h(){this._init$(void 0,-5)}function s(t,e,r,n){return"function"!=typeof e?i("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new o(t,e,r,n).promise()}e.inherits(o,t),o.prototype._init=function(){},o.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},o.prototype._promiseFulfilled=function(t,e){var r=this._values;r[e]=t;var n,i=this.length(),o=this._preservedValues,s=null!==o,a=this._gotAccum,u=this._valuesPhase;if(!u)for(u=this._valuesPhase=new Array(i),n=0;n<i;++n)u[n]=0;if(n=u[e],0===e&&this._zerothIsAccum?(this._accum=t,this._gotAccum=a=!0,u[e]=0===n?1:2):-1===e?(this._accum=t,this._gotAccum=a=!0):0===n?u[e]=1:(u[e]=2,this._accum=t),a){for(var c,f=this._callback,h=this._promise._boundValue(),l=this._reducingIndex;l<i;++l)if(2!==(n=u[l])){if(1!==n)return;if(t=r[l],this._promise._pushContext(),s?(o.push(t),c=v(f).call(h,t,l,i)):c=v(f).call(h,this._accum,t,l,i),this._promise._popContext(),c===g)return this._reject(c.e);var p=y(c,this._promise);if(p instanceof d){if((p=p._target())._isPending())return u[l]=4,p._proxyPromiseArray(this,l);if(!p._isFulfilled())return this._reject(p._reason());c=p._value()}this._reducingIndex=l+1,this._accum=c}else this._reducingIndex=l+1;this._resolve(s?o:this._accum)}},d.prototype.reduce=function(t,e){return s(this,t,e,null)},d.reduce=function(t,e,r,n){return s(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(t,e,r){"use strict";var n,i=t("./util");if(i.isNode&&"undefined"==typeof MutationObserver){var o=a.setImmediate,s=U.nextTick;n=i.isRecentNode?function(t){o.call(a,t)}:function(t){s.call(U,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?n=void 0!==u?function(t){u(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(n=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}).isStatic=!0;e.exports=n},{"./util":38}],32:[function(i,t,e){"use strict";t.exports=function(t,e){var n=t.PromiseInspection;function r(t){this.constructor$(t)}i("./util.js").inherits(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var r=new n;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},r.prototype._promiseRejected=function(t,e){var r=new n;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},t.settle=function(t){return new r(t).promise()},t.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":38}],33:[function(c,t,e){"use strict";t.exports=function(t,e,i){var r=c("./util.js"),n=c("./errors.js").RangeError,o=c("./errors.js").AggregateError,s=r.isArray;function a(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new a(t),n=r.promise();return r.setHowMany(e),r.init(),n}r.inherits(a,e),a.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},a.prototype.init=function(){this._initialized=!0,this._init()},a.prototype.setUnwrap=function(){this._unwrap=!0},a.prototype.howMany=function(){return this._howMany},a.prototype.setHowMany=function(t){this._howMany=t},a.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},a.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new o,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},a.prototype._fulfilled=function(){return this._totalResolved},a.prototype._rejected=function(){return this._values.length-this.length()},a.prototype._addRejected=function(t){this._values.push(t)},a.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},a.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},a.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new n(e)},a.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=a}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return 0<(268435456&this._bitField)},e.prototype.isRejected=t.prototype._isRejected=function(){return 0<(134217728&this._bitField)},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return 0<(402653184&this._bitField)},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(a,u){var c=t("./util.js"),f=c.errorObj,o=c.isObject;function s(t){return t.then}var h={}.hasOwnProperty;return function(t,e){if(o(t)){if(t instanceof a)return t;if(i=t,h.call(i,"_promise0")){var r=new a(u);return t._then(r._fulfillUnchecked,r._rejectUncheckedCheckError,r._progressUnchecked,r,null),r}var n=c.tryCatch(s)(t);if(n===f)return e&&e._pushContext(),r=a.reject(n.e),e&&e._popContext(),r;if("function"==typeof n)return function(t,e,r){var n=new a(u),i=n;r&&r._pushContext(),n._captureStackTrace(),r&&r._popContext();var o=!0,s=c.tryCatch(e).call(t,function(t){n&&(n._resolveCallback(t),n=null)},function(t){n&&(n._rejectCallback(t,o,!0),n=null)},function(t){n&&"function"==typeof n._progress&&n._progress(t)});return o=!1,n&&s===f&&(n._rejectCallback(s.e,!0,!0),n=null),i}(t,n,e)}var i;return t}}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(n,i){var o=t("./util.js"),s=n.TimeoutError,a=function(t){return e(+this).thenReturn(t)},e=n.delay=function(t,e){if(void 0===e){e=t,t=void 0;var r=new n(i);return setTimeout(function(){r._fulfill()},e),r}return e=+e,n.resolve(t)._then(a,null,null,e,void 0)};function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function u(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}n.prototype.delay=function(t){return e(this,t)},n.prototype.timeout=function(t,n){t=+t;var i=this.then().cancellable();i._cancellationParent=this;var e=setTimeout(function(){var t,e,r;e=n,(t=i).isPending()&&(!o.isPrimitive(e)&&e instanceof Error?r=e:("string"!=typeof e&&(e="operation timed out"),r=new s(e)),o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r))},t);return i._then(r,u,void 0,e,void 0)}}},{"./util.js":38}],37:[function(s,t,e){"use strict";t.exports=function(f,h,l,e){var r=s("./errors.js").TypeError,t=s("./util.js").inherits,n=f.PromiseInspection;function p(t){for(var e=t.length,r=0;r<e;++r){var n=t[r];if(n.isRejected())return f.reject(n.error());t[r]=n._settledValue}return t}function c(t){setTimeout(function(){throw t},0)}function i(i,o){var s=0,a=i.length,u=f.defer();return function t(){if(a<=s)return u.resolve();var e,r,n=(e=i[s++],(r=l(e))!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&r._setDisposable(e._getDisposer()),r);if(n instanceof f&&n._isDisposable()){try{n=l(n._getDisposer().tryDispose(o),i.promise)}catch(t){return c(t)}if(n instanceof f)return n._then(t,c,null,null,null)}t()}(),u.promise}function d(t){var e=new n;return e._settledValue=t,e._bitField=268435456,i(this,e).thenReturn(t)}function y(t){var e=new n;return e._settledValue=t,e._bitField=134217728,i(this,e).thenThrow(t)}function v(t,e,r){this._data=t,this._promise=e,this._context=r}function o(t,e,r){this.constructor$(t,e,r)}function g(t){return v.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},v.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},v.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},t(o,v),o.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},f.using=function(){var t=arguments.length;if(t<2)return h("you must pass at least 2 arguments to Promise.using");var e,r=arguments[t-1];if("function"!=typeof r)return h("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var n=!0;2===t&&Array.isArray(arguments[0])?(t=(e=arguments[0]).length,n=!1):(e=arguments,t--);for(var i=new Array(t),o=0;o<t;++o){var s=e[o];if(v.isDisposer(s)){var a=s;(s=s.promise())._setDisposable(a)}else{var u=l(s);u instanceof f&&(s=u._then(g,null,null,{resources:i,index:o},void 0))}i[o]=s}var c=f.settle(i).then(p).then(function(t){var e;c._pushContext();try{e=n?r.apply(void 0,t):r.call(void 0,t)}finally{c._popContext()}return e})._then(d,y,void 0,i,void 0);return i.promise=c},f.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},f.prototype._isDisposable=function(){return 0<(262144&this._bitField)},f.prototype._getDisposer=function(){return this._disposer},f.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},f.prototype.disposer=function(t){if("function"==typeof t)return new o(t,this,e());throw new r}}},{"./errors.js":13,"./util.js":38}],38:[function(t,e,r){"use strict";var c=t("./es5.js"),n="undefined"==typeof navigator,i=function(){try{var t={};return c.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),o={e:{}},s;function a(){try{var t=s;return s=null,t.apply(this,arguments)}catch(t){return o.e=t,o}}function u(t){return s=t,a}var f=function(e,r){var n={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=r).prototype)n.call(r.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=r.prototype[t])}return t.prototype=r.prototype,e.prototype=new t,e.prototype};function h(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function l(t){return!h(t)}function p(t){return h(t)?new Error(x(t)):t}function d(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=t[r];return i[r]=e,i}function y(t,e,r){if(!c.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(t,e,r){if(h(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return c.defineProperty(t,e,n),t}function g(t){throw t}var m=function(){var i=[Array.prototype,Object.prototype,Function.prototype],a=function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return!0;return!1};if(c.isES5){var u=Object.getOwnPropertyNames;return function(t){for(var e=[],r=Object.create(null);null!=t&&!a(t);){var n;try{n=u(t)}catch(t){return e}for(var i=0;i<n.length;++i){var o=n[i];if(!r[o]){r[o]=!0;var s=Object.getOwnPropertyDescriptor(t,o);null!=s&&null==s.get&&null==s.set&&e.push(o)}}t=c.getPrototypeOf(t)}return e}}var o={}.hasOwnProperty;return function(t){if(a(t))return[];var e=[];t:for(var r in t)if(o.call(t,r))e.push(r);else{for(var n=0;n<i.length;++n)if(o.call(i[n],r))continue t;e.push(r)}return e}}(),_=/this\s*\.\s*\S+\s*=/;function b(t){try{if("function"==typeof t){var e=c.names(t.prototype),r=c.isES5&&1<e.length,n=0<e.length&&!(1===e.length&&"constructor"===e[0]),i=_.test(t+"")&&0<c.names(t).length;if(r||n||i)return!0}return!1}catch(t){return!1}}function w(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t}var E=/^[a-z$_][a-z$_0-9]*$/i;function k(t){return E.test(t)}function j(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n}function x(t){try{return t+""}catch(t){return"[no string representation]"}}function A(t){try{v(t,"isOperational",!0)}catch(t){}}function C(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function B(t){return t instanceof Error&&c.propertyIsWritable(t,"stack")}var S="stack"in new Error?function(t){return B(t)?t:new Error(x(t))}:function(t){if(B(t))return t;try{throw new Error(x(t))}catch(t){return t}};function T(t){return{}.toString.call(t)}function P(t,e,r){for(var n=c.names(t),i=0;i<n.length;++i){var o=n[i];if(r(o))try{c.defineProperty(e,o,c.getDescriptor(t,o))}catch(t){}}}var R={isClass:b,isIdentifier:k,inheritedDataKeys:m,getDataPropertyOrDefault:y,thrower:g,isArray:c.isArray,haveGetters:i,notEnumerableProp:v,isPrimitive:h,isObject:l,canEvaluate:n,errorObj:o,tryCatch:u,inherits:f,withAppended:d,maybeWrapAsError:p,toFastProperties:w,filledRange:j,toString:x,canAttachTrace:B,ensureErrorObject:S,originatesFromRejection:C,markAsOriginatingFromRejection:A,classString:T,copyDescriptors:P,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==U&&"[object process]"===T(U).toLowerCase()},O;R.isRecentNode=R.isNode&&(O=U.versions.node.split(".").map(Number),0===O[0]&&10<O[1]||0<O[0]),R.isNode&&R.toFastProperties(U);try{throw new Error}catch(t){R.lastLineError=t}e.exports=R},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:43,timers:53}],15:[function(t,e,r){},{}],16:[function(t,e,r){"use strict";var n=t("base64-js"),o=t("ieee754");r.Buffer=h,r.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function s(t){if(i<t)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=h.prototype,e}function h(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return a(t,e,r)}function a(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return I(t)||t&&I(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=h.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|p(t,e),n=s(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e):function(t){if(h.isBuffer(t)){var e=0|l(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||D(t.length)?s(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t){return u(t),s(t<0?0:0|l(t))}function f(t){for(var e=t.length<0?0:0|l(t.length),r=s(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(i<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||I(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(n)return O(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),D(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(a<r+u&&(r=a-u),o=r;0<=o;o--){for(var h=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){h=!1;break}if(h)return o}return-1}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=e.length;o/2<n&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(D(a))return s;t[r+s]=a}return s}function m(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function b(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],f=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=r)switch(h){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(f=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(f=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(f=u)}null===f?(f=65533,h=1):65535<f&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=w));return r}(n)}r.kMaxLength=i,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,r){return a(t,e,r)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,r){return i=e,o=r,u(n=t),n<=0?s(n):void 0!==i?"string"==typeof o?s(n).fill(i,o):s(n).fill(i):s(n);var n,i,o},h.allocUnsafe=function(t){return c(t)},h.allocUnsafeSlow=function(t){return c(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(ArrayBuffer.isView(o)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return _(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,r,n,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,s,a,u,c,f,h,l,p,d=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return l=e,p=r,F(O(t,(h=this).length-l),h,l,p);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return m(this,t,e,r);case"base64":return u=this,c=e,f=r,F(U(t),u,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,a=r,F(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,(o=this).length-s),o,s,a);default:if(d)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function j(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=R(t[o]);return i}function x(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function B(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function S(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function T(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,8),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=h.prototype,n},h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,r){return S(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return S(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return T(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return T(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;0<=o;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=h.isBuffer(t)?t:new h(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var P=/[^+/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function O(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function U(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function I(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function D(t){return t!=t}},{"base64-js":12,ieee754:37}],17:[function(t,e,r){var n=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},{}],18:[function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}void 0!==e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],19:[function(t,e,r){e.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],20:[function(r,n,o){(function(e){function t(){var t;try{t=o.storage.debug}catch(t){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t}(o=n.exports=r("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+o.humanize(this.diff),!e)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(i=n))}),t.splice(i,0,r)},o.save=function(t){try{null==t?o.storage.removeItem("debug"):o.storage.debug=t}catch(t){}},o.load=t,o.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},o.enable(t())}).call(this,r("_process"))},{"./debug":21,_process:43}],21:[function(t,e,u){function r(t){var n;function a(){if(a.enabled){var i=a,t=+new Date,e=t-(n||t);i.diff=e,i.prev=n,i.curr=t,n=t;for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,e){if("%%"===t)return t;s++;var r=u.formatters[e];if("function"==typeof r){var n=o[s];t=r.call(i,n),o.splice(s,1),s--}return t}),u.formatArgs.call(i,o),(a.log||u.log||console.log.bind(console)).apply(i,o)}}return a.namespace=t,a.enabled=u.enabled(t),a.useColors=u.useColors(),a.color=function(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return u.colors[Math.abs(r)%u.colors.length]}(t),a.destroy=i,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function i(){var t=u.instances.indexOf(this);return-1!==t&&(u.instances.splice(t,1),!0)}(u=e.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},u.disable=function(){u.enable("")},u.enable=function(t){var e;u.save(t),u.names=[],u.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(e=0;e<n;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+t.substr(1)+"$")):u.names.push(new RegExp("^"+t+"$")));for(e=0;e<u.instances.length;e++){var i=u.instances[e];i.enabled=u.enabled(i.namespace)}},u.enabled=function(t){if("*"===t[t.length-1])return!0;var e,r;for(e=0,r=u.skips.length;e<r;e++)if(u.skips[e].test(t))return!1;for(e=0,r=u.names.length;e<r;e++)if(u.names[e].test(t))return!0;return!1},u.humanize=t("ms"),u.instances=[],u.names=[],u.skips=[],u.formatters={}},{ms:40}],22:[function(t,e,r){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":23,"engine.io-parser":31}],23:[function(e,r,t){(function(n){var i=e("./transports/index"),t=e("component-emitter"),h=e("debug")("engine.io-client:socket"),o=e("indexof"),s=e("engine.io-parser"),a=e("parseuri"),u=e("parseqs");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:n.location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode;var r="object"==typeof n&&n;r.global===r&&(e.extraHeaders&&0<Object.keys(e.extraHeaders).length&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(r.exports=l).priorWebsocketSuccess=!1,t(l.prototype),l.protocol=s.protocol,(l.Socket=l).Transport=e("./transport"),l.transports=e("./transports/index"),l.parser=e("engine.io-parser"),l.prototype.createTransport=function(t){h('creating transport "%s"',t);var e=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var r=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){h("setting transport %s",t.name);var e=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=t).on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},l.prototype.probe=function(r){h('probing transport "%s"',r);var n=this.createTransport(r,{probe:1}),i=!1,o=this;function t(){if(o.onlyBinaryUpgrades){var t=!this.supportsBinary&&o.transport.supportsBinary;i=i||t}i||(h('probe transport "%s" opened',r),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(t){if(!i)if("pong"===t.type&&"probe"===t.data){if(h('probe transport "%s" pong',r),o.upgrading=!0,o.emit("upgrading",n),!n)return;l.priorWebsocketSuccess="websocket"===n.name,h('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){i||"closed"!==o.readyState&&(h("changing transport and sending upgrade packet"),f(),o.setTransport(n),n.send([{type:"upgrade"}]),o.emit("upgrade",n),n=null,o.upgrading=!1,o.flush())})}else{h('probe transport "%s" failed',r);var e=new Error("probe error");e.transport=n.name,o.emit("upgradeError",e)}}))}function s(){i||(i=!0,f(),n.close(),n=null)}function e(t){var e=new Error("probe error: "+t);e.transport=n.name,s(),h('probe transport "%s" failed because of error: %s',r,t),o.emit("upgradeError",e)}function a(){e("transport closed")}function u(){e("socket closed")}function c(t){n&&t.name!==n.name&&(h('"%s" works - aborting "%s"',t.name,n.name),s())}function f(){n.removeListener("open",t),n.removeListener("error",e),n.removeListener("close",a),o.removeListener("close",u),o.removeListener("upgrading",c)}l.priorWebsocketSuccess=!1,n.once("open",t),n.once("error",e),n.once("close",a),this.once("close",u),this.once("upgrading",c),n.open()},l.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(h('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else h('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},l.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:t,data:e,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),h("socket closing - telling transport to close"),t.transport.close()}function r(){t.removeListener("upgrade",r),t.removeListener("upgradeError",r),e()}function n(){t.once("upgrade",r),t.once("upgradeError",r)}return this},l.prototype.onError=function(t){h("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){h('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~o(this.transports,t[r])&&e.push(t[r]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":24,"./transports/index":25,"component-emitter":18,debug:20,"engine.io-parser":31,indexof:38,parseqs:41,parseuri:42}],24:[function(t,e,r){var n=t("engine.io-parser");function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t("component-emitter")((e.exports=i).prototype),i.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":18,"engine.io-parser":31}],25:[function(e,t,r){(function(s){var a=e("xmlhttprequest-ssl"),u=e("./polling-xhr"),c=e("./polling-jsonp"),t=e("./websocket");r.polling=function(t){var e=!1,r=!1,n=!1!==t.jsonp;if(s.location){var i="https:"===location.protocol,o=location.port;o||(o=i?443:80),e=t.hostname!==location.hostname||o!==t.port,r=t.secure!==i}{if(t.xdomain=e,t.xscheme=r,"open"in new a(t)&&!t.forceJSONP)return new u(t);if(!n)throw new Error("JSONP disabled");return new c(t)}},r.websocket=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":26,"./polling-xhr":27,"./websocket":29,"xmlhttprequest-ssl":30}],26:[function(s,a,t){(function(r){var n=s("./polling"),t=s("component-inherit");a.exports=e;var i,c=/\n/g,f=/\\n/g;function o(){}function e(t){n.call(this,t),this.query=this.query||{},i||(r.___eio||(r.___eio=[]),i=r.___eio),this.index=i.length;var e=this;i.push(function(t){e.onData(t)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=o)},!1)}t(e,n),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},e.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},e.prototype.doWrite=function(t,e){var r=this;if(!this.form){var n,i=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function a(){u(),e()}function u(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(t)}catch(t){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),u(),t=t.replace(f,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&a()}:this.iframe.onload=a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":28,"component-inherit":19}],27:[function(f,h,t){(function(i){var o=f("xmlhttprequest-ssl"),n=f("./polling"),t=f("component-emitter"),e=f("component-inherit"),s=f("debug")("engine.io-client:polling-xhr");function r(){}function a(t){if(n.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,i.location){var e="https:"===location.protocol,r=location.port;r||(r=e?443:80),this.xd=t.hostname!==i.location.hostname||r!==t.port,this.xs=t.secure!==e}}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function c(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}h.exports=a,h.exports.Request=u,e(a,n),a.prototype.supportsBinary=!0,a.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new u(t)},a.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),i=this;n.on("success",e),n.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=n},a.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},t(u.prototype),u.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new o(t),r=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&e.setRequestHeader(n,this.extraHeaders[n])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");r.supportsBinary&&"application/octet-stream"===t&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?r.onLoad():setTimeout(function(){r.onError(e.status)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}i.document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(t){}i.document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},i.document&&(i.attachEvent?i.attachEvent("onunload",c):i.addEventListener&&i.addEventListener("beforeunload",c,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":28,"component-emitter":18,"component-inherit":19,debug:20,"xmlhttprequest-ssl":30}],28:[function(t,e,r){var n=t("../transport"),i=t("parseqs"),o=t("engine.io-parser"),s=t("component-inherit"),a=t("yeast"),u=t("debug")("engine.io-client:polling");e.exports=f;var c=null!=new(t("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function f(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),n.call(this,t)}s(f,n),f.prototype.name="polling",f.prototype.doOpen=function(){this.poll()},f.prototype.pause=function(t){var e=this;function r(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){u("pre-pause polling complete"),--n||r()})),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",function(){u("pre-pause writing complete"),--n||r()}))}else r()},f.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},f.prototype.onData=function(t){var n=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,function(t,e,r){if("opening"===n.readyState&&n.onOpen(),"close"===t.type)return n.onClose(),!1;n.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},f.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},f.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t}},{"../transport":24,"component-inherit":19,debug:20,"engine.io-parser":31,parseqs:41,"xmlhttprequest-ssl":30,yeast:55}],29:[function(h,l,t){(function(s){var e,r=h("../transport"),a=h("engine.io-parser"),n=h("parseqs"),t=h("component-inherit"),i=h("yeast"),u=h("debug")("engine.io-client:websocket"),o=s.WebSocket||s.MozWebSocket;if("undefined"==typeof window)try{e=h("ws")}catch(t){}var c=o;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=o&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(c=e),r.call(this,t)}c||"undefined"!=typeof window||(c=e),t(l.exports=f,r),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new c(t,e):new c(t):new c(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},f.prototype.write=function(t){var n=this;this.writable=!1;for(var i=t.length,e=0,r=i;e<r;e++)!function(r){a.encodePacket(r,n.supportsBinary,function(t){if(!n.usingBrowserWebSocket){var e={};if(r.options&&(e.compress=r.options.compress),n.perMessageDeflate)("string"==typeof t?s.Buffer.byteLength(t):t.length)<n.perMessageDeflate.threshold&&(e.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(t):n.ws.send(t,e)}catch(t){u("websocket closed before onclose event")}--i||o()})}(t[e]);function o(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},f.prototype.onClose=function(){r.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=i()),this.supportsBinary||(t.b64=1),(t=n.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t},f.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===f.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":24,"component-inherit":19,debug:20,"engine.io-parser":31,parseqs:41,ws:15,yeast:55}],30:[function(t,e,r){(function(i){var o=t("has-cors");e.exports=function(t){var e=t.xdomain,r=t.xscheme,n=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||o))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&n)return new XDomainRequest}catch(t){}if(!e)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":36}],31:[function(n,t,v){(function(c){var i,t=n("./keys"),o=n("has-binary2"),l=n("arraybuffer.slice"),a=n("after"),f=n("./utf8");c&&c.ArrayBuffer&&(i=n("base64-arraybuffer"));var e="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),r="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=e||r;v.protocol=3;var p=v.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=t(p),d={type:"error",data:"parser error"},y=n("blob");function u(t,e,r){for(var i=new Array(t.length),n=a(t.length,r),o=function(r,t,n){e(t,function(t,e){i[r]=e,n(t,i)})},s=0;s<t.length;s++)o(s,t[s],n)}v.encodePacket=function(t,e,r,n){"function"==typeof e&&(n=e,e=!1),"function"==typeof r&&(n=r,r=null);var i,o,s,a=void 0===t.data?void 0:t.data.buffer||t.data;if(c.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,e,r){if(!e)return v.encodeBase64Packet(t,r);var n=t.data,i=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=p[t.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return r(o.buffer)}(t,e,n);if(y&&a instanceof c.Blob)return function(t,e,r){if(!e)return v.encodeBase64Packet(t,r);if(h)return function(t,e,r){if(!e)return v.encodeBase64Packet(t,r);var n=new FileReader;return n.onload=function(){t.data=n.result,v.encodePacket(t,e,!0,r)},n.readAsArrayBuffer(t.data)}(t,e,r);var n=new Uint8Array(1);n[0]=p[t.type];var i=new y([n.buffer,t.data]);return r(i)}(t,e,n);if(a&&a.base64)return i=t,o=n,s="b"+v.packets[i.type]+i.data.data,o(s);var u=p[t.type];return void 0!==t.data&&(u+=r?f.encode(String(t.data),{strict:!1}):String(t.data)),n(""+u)},v.encodeBase64Packet=function(e,r){var n,i="b"+v.packets[e.type];if(y&&e.data instanceof c.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];n=String.fromCharCode.apply(null,a)}return i+=c.btoa(n),r(i)},v.decodePacket=function(t,e,r){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return v.decodeBase64Packet(t.substr(1),e);if(r&&!1===(t=function(t){try{t=f.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var n=t.charAt(0);return Number(n)==n&&s[n]?1<t.length?{type:s[n],data:t.substring(1)}:{type:s[n]}:d}n=new Uint8Array(t)[0];var i=l(t,1);return y&&"blob"===e&&(i=new y([i])),{type:s[n],data:i}},v.decodeBase64Packet=function(t,e){var r=s[t.charAt(0)];if(!i)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=i.decode(t.substr(1));return"blob"===e&&y&&(n=new y([n])),{type:r,data:n}},v.encodePayload=function(t,e,r){"function"==typeof e&&(r=e,e=null);var n=o(t);if(e&&n)return y&&!h?v.encodePayloadAsBlob(t,r):v.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");u(t,function(t,r){v.encodePacket(t,!!n&&e,!1,function(t){var e;r(null,(e=t).length+":"+e)})},function(t,e){return r(e.join(""))})},v.decodePayload=function(t,e,r){if("string"!=typeof t)return v.decodePayloadAsBinary(t,e,r);var n;if("function"==typeof e&&(r=e,e=null),""===t)return r(d,0,1);for(var i,o,s="",a=0,u=t.length;a<u;a++){var c=t.charAt(a);if(":"===c){if(""===s||s!=(i=Number(s)))return r(d,0,1);if(s!=(o=t.substr(a+1,i)).length)return r(d,0,1);if(o.length){if(n=v.decodePacket(o,e,!1),d.type===n.type&&d.data===n.data)return r(d,0,1);if(!1===r(n,a+i,u))return}a+=i,s=""}else s+=c}return""!==s?r(d,0,1):void 0},v.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));u(t,function(t,e){v.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,e){var r=e.reduce(function(t,e){var r;return t+(r="string"==typeof e?e.length:e.byteLength).toString().length+r+2},0),s=new Uint8Array(r),a=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);r=n.buffer}s[a++]=e?0:1;var o=r.byteLength.toString();for(i=0;i<o.length;i++)s[a++]=parseInt(o[i]);s[a++]=255;for(n=new Uint8Array(r),i=0;i<n.length;i++)s[a++]=n[i]}),n(s.buffer)})},v.encodePayloadAsBlob=function(t,r){u(t,function(t,a){v.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);t=r.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(i.length+1);for(n=0;n<i.length;n++)o[n]=parseInt(i[n]);if(o[i.length]=255,y){var s=new y([e.buffer,o.buffer,t]);a(null,s)}})},function(t,e){return r(new y(e))})},v.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var e=t,i=[];0<e.byteLength;){for(var o=new Uint8Array(e),s=0===o[0],a="",u=1;255!==o[u];u++){if(310<a.length)return n(d,0,1);a+=o[u]}e=l(e,2+a.length),a=parseInt(a);var c=l(e,0,a);if(s)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(t){var f=new Uint8Array(c);c="";for(u=0;u<f.length;u++)c+=String.fromCharCode(f[u])}i.push(c),e=l(e,a)}var h=i.length;i.forEach(function(t,e){n(v.decodePacket(t,r,!0),e,h)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":32,"./utf8":33,after:8,"arraybuffer.slice":9,"base64-arraybuffer":11,blob:13,"has-binary2":35}],32:[function(t,e,r){e.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},{}],33:[function(t,m,_){(function(g){!function(t){var e="object"==typeof _&&_,r="object"==typeof m&&m&&m.exports==e&&m,n="object"==typeof g&&g;n.global!==n&&n.window!==n||(t=n);var o,s,a,u=String.fromCharCode;function c(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function i(t,e){if(55296<=t&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function f(t,e){return u(t>>e&63|128)}function h(t,e){if(0==(4294967168&t))return u(t);var r="";return 0==(4294965248&t)?r=u(t>>6&31|192):0==(4294901760&t)?(i(t,e)||(t=65533),r=u(t>>12&15|224),r+=f(t,6)):0==(4292870144&t)&&(r=u(t>>18&7|240),r+=f(t,12),r+=f(t,6)),r+=u(63&t|128)}function l(){if(s<=a)throw Error("Invalid byte index");var t=255&o[a];if(a++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function p(t){var e,r;if(s<a)throw Error("Invalid byte index");if(a==s)return!1;if(e=255&o[a],a++,0==(128&e))return e;if(192==(224&e)){if(128<=(r=(31&e)<<6|l()))return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(r=(15&e)<<12|l()<<6|l()))return i(r,t)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(r=(7&e)<<18|l()<<12|l()<<6|l())&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}var d={version:"2.1.2",encode:function(t,e){for(var r=!1!==(e=e||{}).strict,n=c(t),i=n.length,o=-1,s="";++o<i;)s+=h(n[o],r);return s},decode:function(t,e){var r=!1!==(e=e||{}).strict;o=c(t),s=o.length,a=0;for(var n,i=[];!1!==(n=p(r));)i.push(n);return function(t){for(var e,r=t.length,n=-1,i="";++n<r;)65535<(e=t[n])&&(i+=u((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=u(e);return i}(i)}};if("function"==typeof b&&"object"==typeof b.amd&&b.amd)b(function(){return d});else if(e&&!e.nodeType)if(r)r.exports=d;else{var y={}.hasOwnProperty;for(var v in d)y.call(d,v)&&(e[v]=d[v])}else t.utf8=d}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(t,e,r){var u=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0;var i,a=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(t){i=!1}function f(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]):(o=t._events=u(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=f(t))&&0<i&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=o[e]=r,++t._eventsCount;return t}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=o.call(l,n);return i.listener=r,n.wrapFn=i}function d(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):v(i,i.length):[]}function y(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function v(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}i?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');a=t}}):n.defaultMaxListeners=a,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return f(this)},n.prototype.emit=function(t){var e,r,n,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(1<arguments.length&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(r=s[t]))return!1;var c="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=v(t,n),o=0;o<n;++o)i[o].call(r)}(r,c,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=v(t,i),s=0;s<i;++s)o[s].call(r,n)}(r,c,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=v(t,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,a=v(t,s),u=0;u<s;++u)a[u].call(r,n,i,o)}(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=v(t,i),s=0;s<i;++s)o[s].apply(r,n)}(r,c,this,i)}return!0},n.prototype.on=n.prototype.addListener=function(t,e){return h(this,t,e,!1)},n.prototype.prependListener=function(t,e){return h(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},n.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=u(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),n.removeListener&&this.emit("removeListener",t,s||e)}return this},n.prototype.removeAllListeners=function(t){var e,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=u(null):delete r[t]),this;if(0===arguments.length){var i,o=s(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},n.prototype.listenerCount=y,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],35:[function(e,r,t){(function(o){var s=e("isarray"),t=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);r.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(s(e)){for(var r=0,n=e.length;r<n;r++)if(t(e[r]))return!0;return!1}if("function"==typeof o&&o.isBuffer&&o.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||a&&e instanceof Blob||u&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}}).call(this,e("buffer").Buffer)},{buffer:16,isarray:39}],36:[function(t,e,r){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],37:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;0<f;o=256*o+t[e+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;0<f;s=256*s+t[e+h],h+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+h?l/u:l*Math.pow(2,1-h))*u&&(s++,u/=2),f<=s+h?(a=0,s=f):1<=s+h?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},{}],38:[function(t,e,r){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},{}],39:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],40:[function(t,e,r){var i=36e5,o=864e5;function s(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}e.exports=function(t,e){e=e||{};var r,n=typeof t;if("string"===n&&0<t.length)return function(t){if(100<(t=String(t)).length)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(t);if("number"===n&&!1===isNaN(t))return e.long?s(r=t,o,"day")||s(r,i,"hour")||s(r,6e4,"minute")||s(r,1e3,"second")||r+" ms":function(t){if(o<=t)return Math.round(t/o)+"d";if(i<=t)return Math.round(t/i)+"h";if(6e4<=t)return Math.round(t/6e4)+"m";if(1e3<=t)return Math.round(t/1e3)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],41:[function(t,e,r){r.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},r.decode=function(t){for(var e={},r=t.split("&"),n=0,i=r.length;n<i;n++){var o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],42:[function(t,e,r){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,r=t.indexOf("["),n=t.indexOf("]");-1!=r&&-1!=n&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));for(var i=a.exec(t||""),o={},s=14;s--;)o[u[s]]=i[s]||"";return-1!=r&&-1!=n&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},{}],43:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,f=[],h=!1,l=-1;function p(){h&&c&&(h=!1,c.length?f=c.concat(f):l=-1,f.length&&d())}function d(){if(!h){var t=u(p);h=!0;for(var e=f.length;e;){for(c=f,f=[];++l<e;)c&&c[l].run();l=-1,e=f.length}c=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new y(t,e)),1!==f.length||h||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],44:[function(h,r,n){(function(e){!function(t){"object"==typeof n&&void 0!==r?r.exports=t():"function"==typeof b&&b.amd?b([],t):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).PxtCloudAPI=t()}(function(){return function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof h&&h;if(!t&&r)return r(e,!0);if(f)return f(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var f="function"==typeof h&&h,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),(n=r.Events||(r.Events={})).ChatNewMessage="new message",n.UserAddSelf="add self",n.UserLeft="user left",n.UserJoined="user joined",n.UserRemoveSelf="remove self",n.UserSelfInfo="self info",n.WorldSyncData="sync data",n.WorldSyncDataDiff="sync data diff"},{}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("clone-deep"),o=t("deep-diff"),s=t("msgpack-lite"),i=function(){function i(){this._synceddata={}}return i.encode=function(t){return s.encode(t)},i.decode=function(t){return s.decode(t)},i.applyDataDiff=function(e,t){return t.forEach(function(t){return o.applyChange(e,e,i.decode(t))}),e},i.calcDataDiff=function(t,e){return(o.diff(t,e)||[]).map(function(t){return i.encode(t)})},i._cloneSourceData=function(t){return t.cloner?t.cloner(t.data,n):n(t.data)},i.prototype.addDataSource=function(t,e){var r=this._synceddata[t];return r||(this._synceddata[t]={source:e,current:i._cloneSourceData(e)}),!!r},i.prototype.isDataSource=function(t){return!!this._synceddata[t]},i.prototype.removeDataSource=function(t){return delete this._synceddata[t]},i.prototype.currentlySynced=function(t){var e=this._synceddata[t];if(e&&e.current)return e.current},i.prototype.calcDataDiff=function(t){var e=this._synceddata[t];if(e&&e.source){var r=i._cloneSourceData(e.source),n=i.calcDataDiff(e.current,r);return e.current=r,n}},i.prototype.applyDataDiff=function(t,e){var r=this._synceddata[t];r||(r=this._synceddata[t]={current:{}}),i.applyDataDiff(r.current,e)},i}();r.DataRepo=i},{"clone-deep":6,"deep-diff":7,"msgpack-lite":19}],3:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(t("./api")),n(t("./datarepo"))},{"./api":1,"./datarepo":2}],4:[function(t,e,r){"use strict";r.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){for(var e,r=l(t),n=r[0],i=r[1],o=new h(3*(n+(c=i))/4-c),s=0,a=0<i?n-4:n,u=0;u<a;u+=4)e=f[t.charCodeAt(u)]<<18|f[t.charCodeAt(u+1)]<<12|f[t.charCodeAt(u+2)]<<6|f[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;var c;return 2===i&&(e=f[t.charCodeAt(u)]<<2|f[t.charCodeAt(u+1)]>>4,o[s++]=255&e),1===i&&(e=f[t.charCodeAt(u)]<<10|f[t.charCodeAt(u+1)]<<4|f[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e),o},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(u(t,o,s<o+16383?s:o+16383));return 1===n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"=")),i.join("")};for(var a=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],f[n.charCodeAt(i)]=i;function l(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[(i=n)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],5:[function(t,e,r){"use strict";var a=t("base64-js"),o=t("ieee754");r.Buffer=h,r.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},r.INSPECT_MAX_BYTES=50;var n=2147483647;function s(t){if(n<t)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=h.prototype,e}function h(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return i(t,e,r)}function i(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return U(t)||t&&U(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=h.prototype,n}(t,e,r):"string"==typeof t?function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|p(t,e),n=s(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e):function(t){if(h.isBuffer(t)){var e=0|l(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||F(t.length)?s(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t){return u(t),s(t<0?0:0|l(t))}function f(t){for(var e=t.length<0?0:0|l(t.length),r=s(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(n<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(t).length;default:if(n)return P(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(a<r+u&&(r=a-u),o=r;0<=o;o--){for(var h=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){h=!1;break}if(h)return o}return-1}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=e.length;o/2<n&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(F(a))return s;t[r+s]=a}return s}function m(t,e,r,n){return O(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],f=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=r)switch(h){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(f=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(f=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(f=u)}null===f?(f=65533,h=1):65535<f&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=b));return r}(n)}r.kMaxLength=n,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,r){return i(t,e,r)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,r){return i=e,o=r,u(n=t),n<=0?s(n):void 0!==i?"string"==typeof o?s(n).fill(i,o):s(n).fill(i):s(n);var n,i,o},h.allocUnsafe=function(t){return c(t)},h.allocUnsafeSlow=function(t){return c(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(ArrayBuffer.isView(o)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,r){var n,i,o,s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return _(this,e,r);case"ascii":return w(this,e,r);case"latin1":case"binary":return E(this,e,r);case"base64":return n=this,o=r,0===(i=e)&&o===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,r,n,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,s,a,u,c,f,h=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return c=e,f=r,O(P(t,this.length-c),this,c,f);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return m(this,t,e,r);case"base64":return this,a=e,u=r,O(R(t),this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=e,s=r,O(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,this.length-o),this,o,s);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function k(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||i<r)&&(r=i);for(var o="",s=e;s<r;++s)o+=(n=t[s])<16?"0"+n.toString(16):n.toString(16);return o}function j(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function x(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function C(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(t,e,r,n,i){return e=+e,r>>>=0,i||C(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function S(t,e,r,n,i){return e=+e,r>>>=0,i||C(t,0,r,8),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=h.prototype,n},h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||x(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||x(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||x(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||x(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||x(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||x(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||A(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||A(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,r){return B(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return B(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return S(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return S(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;0<=o;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=h.isBuffer(t)?t:new h(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var T=/[^+/0-9A-Za-z-_]/g;function P(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function R(t){return a.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function O(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function U(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function F(t){return t!=t}},{"base64-js":4,ieee754:11}],6:[function(t,e,r){"use strict";var n=t("is-plain-object"),o=t("shallow-clone"),s=t("kind-of"),a=t("for-own");e.exports=function i(t,e){switch(s(t)){case"object":return function(t,r){if(n(t)||!0===r&&"object"===s(t)){var e={};return a(t,function(t,e){this[e]=i(t,r)},e),e}return"function"==typeof r?r(t):t}(t,e);case"array":return function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=i(t[n],e);return r}(t,e);default:return o(t)}}},{"for-own":10,"is-plain-object":13,"kind-of":16,"shallow-clone":47}],7:[function(t,i,o){!function(t,e){var r=function(t){var s=["N","E","A","D"];function e(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function b(t,e,r){b.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function w(t,e){w.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function E(t,e){E.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function k(t,e,r){k.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function a(t,e,r){var n=t.slice((r||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,n),t}function j(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function o(t){var e=0;if(0===t.length)return e;for(var r=0;r<t.length;r++){e=(e<<5)-e+t.charCodeAt(r),e&=e}return e}function x(t){var e=0,r=j(t);if("array"===r)return t.forEach(function(t){e+=x(t)}),e+o("[type: array, hash: "+e+"]");if("object"===r){for(var n in t)if(t.hasOwnProperty(n)){var i="[ type: object, key: "+n+", value hash: "+x(t[n])+"]";e+=o(i)}return e}return e+o("[ type: "+r+" ; value: "+t+"]")}function A(t,e,r,n,i,o,s,a){r=r||[],s=s||[];var u=(i=i||[]).slice(0);if(null!=o){if(n){if("function"==typeof n&&n(u,o))return;if("object"==typeof n){if(n.prefilter&&n.prefilter(u,o))return;if(n.normalize){var c=n.normalize(u,o,t,e);c&&(t=c[0],e=c[1])}}}u.push(o)}"regexp"===j(t)&&"regexp"===j(e)&&(t=t.toString(),e=e.toString());var f,h,l,p,d=typeof t,y=typeof e,v="undefined"!==d||s&&0<s.length&&s[s.length-1].lhs&&Object.getOwnPropertyDescriptor(s[s.length-1].lhs,o),g="undefined"!==y||s&&0<s.length&&s[s.length-1].rhs&&Object.getOwnPropertyDescriptor(s[s.length-1].rhs,o);if(!v&&g)r.push(new w(u,e));else if(!g&&v)r.push(new E(u,t));else if(j(t)!==j(e))r.push(new b(u,t,e));else if("date"===j(t)&&t-e!=0)r.push(new b(u,t,e));else if("object"===d&&null!==t&&null!==e){for(f=s.length-1;-1<f;--f)if(s[f].lhs===t){p=!0;break}if(p)t!==e&&r.push(new b(u,t,e));else{if(s.push({lhs:t,rhs:e}),Array.isArray(t)){for(a&&(t.sort(function(t,e){return x(t)-x(e)}),e.sort(function(t,e){return x(t)-x(e)})),f=e.length-1,h=t.length-1;h<f;)r.push(new k(u,f,new w(void 0,e[f--])));for(;f<h;)r.push(new k(u,h,new E(void 0,t[h--])));for(;0<=f;--f)A(t[f],e[f],r,n,u,f,s,a)}else{var m=Object.keys(t),_=Object.keys(e);for(f=0;f<m.length;++f)l=m[f],0<=(p=_.indexOf(l))?(A(t[l],e[l],r,n,u,l,s,a),_[p]=null):A(t[l],void 0,r,n,u,l,s,a);for(f=0;f<_.length;++f)(l=_[f])&&A(void 0,e[l],r,n,u,l,s,a)}s.length=s.length-1}}else t!==e&&("number"===d&&isNaN(t)&&isNaN(e)||r.push(new b(u,t,e)))}function u(t,e,r,n,i){var o=[];if(A(t,e,o,n,null,null,null,i),r)for(var s=0;s<o.length;++s)r(o[s]);return o}function n(t,e,r,n){var i=u(t,e,n?function(t){t&&n.push(t)}:void 0,r);return n||(i.length?i:void 0)}function i(t,e,r){if(void 0===r&&e&&~s.indexOf(e.kind)&&(r=e),t&&r&&r.kind){for(var n=t,i=-1,o=r.path?r.path.length-1:0;++i<o;)void 0===n[r.path[i]]&&(n[r.path[i]]=void 0!==r.path[i+1]&&"number"==typeof r.path[i+1]?[]:{}),n=n[r.path[i]];switch(r.kind){case"A":r.path&&void 0===n[r.path[i]]&&(n[r.path[i]]=[]),function t(e,r,n){if(n.path&&n.path.length){var i,o=e[r],s=n.path.length-1;for(i=0;i<s;i++)o=o[n.path[i]];switch(n.kind){case"A":t(o[n.path[i]],n.index,n.item);break;case"D":delete o[n.path[i]];break;case"E":case"N":o[n.path[i]]=n.rhs}}else switch(n.kind){case"A":t(e[r],n.index,n.item);break;case"D":e=a(e,r);break;case"E":case"N":e[r]=n.rhs}return e}(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}return e(b,r),e(w,r),e(E,r),e(k,r),Object.defineProperties(n,{diff:{value:n,enumerable:!0},orderIndependentDiff:{value:function(t,e,r,n){var i=u(t,e,n?function(t){t&&n.push(t)}:void 0,r,!0);return n||(i.length?i:void 0)},enumerable:!0},observableDiff:{value:u,enumerable:!0},orderIndependentObservableDiff:{value:function(t,e,r,n,i,o,s){return A(t,e,r,n,i,o,s,!0)},enumerable:!0},orderIndepHash:{value:x,enumerable:!0},applyDiff:{value:function(e,r,n){e&&r&&u(e,r,function(t){n&&!n(e,r,t)||i(e,r,t)})},enumerable:!0},applyChange:{value:i,enumerable:!0},revertChange:{value:function(t,e,r){if(t&&e&&r&&r.kind){var n,i,o=t;for(i=r.path.length-1,n=0;n<i;n++)void 0===o[r.path[n]]&&(o[r.path[n]]={}),o=o[r.path[n]];switch(r.kind){case"A":!function t(e,r,n){if(n.path&&n.path.length){var i,o=e[r],s=n.path.length-1;for(i=0;i<s;i++)o=o[n.path[i]];switch(n.kind){case"A":t(o[n.path[i]],n.index,n.item);break;case"D":case"E":o[n.path[i]]=n.lhs;break;case"N":delete o[n.path[i]]}}else switch(n.kind){case"A":t(e[r],n.index,n.item);break;case"D":case"E":e[r]=n.lhs;break;case"N":e=a(e,r)}return e}(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),n.DeepDiff=n,t.DeepDiff=n}(t);if("object"==typeof o)i.exports=r;else{var n=t.DeepDiff;r.noConflict=function(){return t.DeepDiff===r&&(t.DeepDiff=n),r},t.DeepDiff=r}}(this)},{}],8:[function(t,n,e){!function(t){void 0!==n&&(n.exports=t);var i="listeners",r={on:function(t,e){return s(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,s(r,t).push(n),r;function n(){o.call(r,t,n),e.apply(this,arguments)}},off:o,emit:function(t,e){var r=this,n=s(r,t,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(t){t.call(r)});else if(2===i)n.forEach(function(t){t.call(r,e)});else{var o=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.apply(r,o)})}return!!n.length}};function e(t){for(var e in r)t[e]=r[e];return t}function o(t,e){var r;if(arguments.length){if(e){if(r=s(this,t,!0)){if(!(r=r.filter(function(t){return t!==e&&t.originalListener!==e})).length)return o.call(this,t);this[i][t]=r}}else if((r=this[i])&&(delete r[t],!Object.keys(r).length))return o.call(this)}else delete this[i];return this}function s(t,e,r){if(!r||t[i]){var n=t[i]||(t[i]={});return n[e]||(n[e]=[])}}e(t.prototype),t.mixin=e}(function t(){if(!(this instanceof t))return new t})},{}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){for(var n in t)if(!1===e.call(r,t[n],n,t))break}},{}],10:[function(t,e,r){"use strict";var o=t("for-in"),s=Object.prototype.hasOwnProperty;e.exports=function(r,n,i){o(r,function(t,e){if(s.call(r,e))return n.call(i,r[e],e,r)})}},{"for-in":9}],11:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;0<f;o=256*o+t[e+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;0<f;s=256*s+t[e+h],h+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+h?l/u:l*Math.pow(2,1-h))*u&&(s++,u/=2),f<=s+h?(a=0,s=f):1<=s+h?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},{}],12:[function(t,e,r){(function(i){!function(m){var _,b="undefined",w=b!==typeof i&&i,E=b!==typeof Uint8Array&&Uint8Array,k=b!==typeof ArrayBuffer&&ArrayBuffer,j=[0,0,0,0,0,0,0,0],n=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},x=4294967296;function t(t,e,u){var f=e?0:4,h=e?4:0,n=e?0:3,i=e?1:2,o=e?2:1,s=e?3:0,a=e?R:U,c=e?O:F,r=d.prototype,l="is"+t,p="_"+l;return r.buffer=void 0,r.offset=0,r[p]=!0,r.toNumber=y,r.toString=function(t){var e=this.buffer,r=this.offset,n=g(e,r+f),i=g(e,r+h),o="",s=!u&&2147483648&n;for(s&&(n=~n,i=x-i),t=t||10;;){var a=n%t*x+i;if(n=Math.floor(n/t),i=Math.floor(a/t),o=(a%t).toString(t)+o,!n&&!i)break}return s&&(o="-"+o),o},r.toJSON=y,r.toArray=A,w&&(r.toBuffer=C),E&&(r.toArrayBuffer=B),d[l]=function(t){return!(!t||!t[p])},m[t]=d;function d(t,e,r,n){return this instanceof d?function(t,e,r,n,i){if(E&&k&&(e instanceof k&&(e=new E(e)),n instanceof k&&(n=new E(n))),e||r||n||_){if(!S(e,r))i=r,n=e,r=0,e=new(_||Array)(8);t.buffer=e,t.offset=r|=0,b!==typeof n&&("string"==typeof n?function(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var c=parseInt(r[i++],n);if(!(0<=c))break;a=a*n+c,s=s*n+Math.floor(a/x),a%=x}u&&(s=~s,a?a=x-a:s++),v(t,e+f,s),v(t,e+h,a)}(e,r,n,i||10):S(n,i)?T(e,r,n,i):"number"==typeof i?(v(e,r+f,n),v(e,r+h,i)):0<n?a(e,r,n):n<0?c(e,r,n):T(e,r,j,0))}else t.buffer=P(j,0)}(this,t,e,r,n):new d(t,e,r,n)}function y(){var t=this.buffer,e=this.offset,r=g(t,e+f),n=g(t,e+h);return u||(r|=0),r?r*x+n:n}function v(t,e,r){t[e+s]=255&r,r>>=8,t[e+o]=255&r,r>>=8,t[e+i]=255&r,r>>=8,t[e+n]=255&r}function g(t,e){return 16777216*t[e+n]+(t[e+i]<<16)+(t[e+o]<<8)+t[e+s]}}function A(t){var e=this.buffer,r=this.offset;return _=null,!1!==t&&0===r&&8===e.length&&n(e)?e:P(e,r)}function C(t){var e=this.buffer,r=this.offset;if(_=w,!1!==t&&0===r&&8===e.length&&i.isBuffer(e))return e;var n=new w(8);return T(n,0,e,r),n}function B(t){var e=this.buffer,r=this.offset,n=e.buffer;if(_=E,!1!==t&&0===r&&n instanceof k&&8===n.byteLength)return n;var i=new E(8);return T(i,0,e,r),i.buffer}function S(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function T(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function P(t,e){return Array.prototype.slice.call(t,e,e+8)}function R(t,e,r){for(var n=e+8;e<n;)t[--n]=255&r,r/=256}function O(t,e,r){var n=e+8;for(r++;e<n;)t[--n]=255&-r^255,r/=256}function U(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function F(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}t("Uint64BE",!0,!0),t("Int64BE",!0,!1),t("Uint64LE",!1,!0),t("Int64LE",!1,!1)}("object"==typeof r&&"string"!=typeof r.nodeName?r:this||{})}).call(this,t("buffer").Buffer)},{buffer:5}],13:[function(t,e,r){"use strict";var n=t("isobject");function i(t){return!0===n(t)&&"[object Object]"===Object.prototype.toString.call(t)}e.exports=function(t){var e,r;return!1!==i(t)&&"function"==typeof(e=t.constructor)&&!1!==i(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},{isobject:15}],14:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],15:[function(t,e,r){"use strict";e.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},{}],16:[function(t,e,r){var u=Object.prototype.toString;function c(t){return t.constructor?t.constructor.name:null}e.exports=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e,r,n,i,o,s,a=typeof t;if("boolean"===a)return"boolean";if("string"===a)return"string";if("number"===a)return"number";if("symbol"===a)return"symbol";if("function"===a)return"GeneratorFunction"===c(t)?"generatorfunction":"function";if(e=t,Array.isArray?Array.isArray(e):e instanceof Array)return"array";if((s=t).constructor&&"function"==typeof s.constructor.isBuffer&&s.constructor.isBuffer(s))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(t))return"arguments";if((r=t)instanceof Date||"function"==typeof r.toDateString&&"function"==typeof r.getDate&&"function"==typeof r.setDate)return"date";if((n=t)instanceof Error||"string"==typeof n.message&&n.constructor&&"number"==typeof n.constructor.stackTraceLimit)return"error";if((i=t)instanceof RegExp||"string"==typeof i.flags&&"boolean"==typeof i.ignoreCase&&"boolean"==typeof i.multiline&&"boolean"==typeof i.global)return"regexp";switch(c(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if("function"==typeof(o=t).throw&&"function"==typeof o.return&&"function"==typeof o.next)return"generator";switch(a=u.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return a.slice(8,-1).toLowerCase().replace(/\s/g,"")}},{}],17:[function(t,e,r){"use strict";var i=t("is-extendable"),n=t("for-in");function o(r,t){i(t)&&n(t,function(t,e){r[e]=t})}e.exports=function(t,e){if(!i(t))throw new TypeError("expected the first argument to be an object");for(var r=arguments.length,n=0;++n<r;)o(t,arguments[n]);return t}},{"for-in":9,"is-extendable":18}],18:[function(t,e,r){"use strict";var n=t("is-plain-object");e.exports=function(t){return n(t)||"function"==typeof t||Array.isArray(t)}},{"is-plain-object":13}],19:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder,r.createCodec=t("./ext").createCodec,r.codec=t("./codec").codec},{"./codec":28,"./decode":30,"./decoder":31,"./encode":33,"./encoder":34,"./ext":38}],20:[function(t,r,e){(function(t){function e(t){return t&&t.isBuffer&&t}r.exports=e(void 0!==t&&t)||e(this.Buffer)||e("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:5}],21:[function(t,e,r){r.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;0<=i;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},r.toString=function(t,e,r){var n=0|e;r||(r=this.length);for(var i="",o=0;n<r;)(o=this[n++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[n++]:224==(240&o)?o=(15&o)<<12|(63&this[n++])<<6|63&this[n++]:240==(248&o)&&(o=(7&o)<<18|(63&this[n++])<<12|(63&this[n++])<<6|63&this[n++]),65536<=o?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},r.write=function(t,e){for(var r=e||(e|=0),n=t.length,i=0,o=0;o<n;)(i=t.charCodeAt(o++))<128?this[r++]=i:(i<2048?this[r++]=192|i>>>6:(i<55296||57343<i?this[r++]=224|i>>>12:(i=65536+(i-55296<<10|t.charCodeAt(o++)-56320),this[r++]=240|i>>>18,this[r++]=128|i>>>12&63),this[r++]=128|i>>>6&63),this[r++]=128|63&i);return r-e}},{}],22:[function(t,e,r){var n=t("./bufferish");function i(t){return new Array(t)}(r=e.exports=i(0)).alloc=i,r.concat=n.concat,r.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},{"./bufferish":26}],23:[function(t,e,r){var n=t("./bufferish"),i=n.global;function o(t){return new i(t)}(r=e.exports=n.hasBuffer?o(0):[]).alloc=n.hasBuffer&&i.alloc||o,r.concat=n.concat,r.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(r,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},{"./bufferish":26}],24:[function(t,e,r){var a=t("./buffer-lite");r.copy=o,r.slice=f,r.toString=function(t,e,r){return(!i&&u.isBuffer(this)?this.toString:a.toString).apply(this,arguments)},r.write=("write",function(){return(this.write||a.write).apply(this,arguments)});var u=t("./bufferish"),n=u.global,i=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,c=i&&!n.TYPED_ARRAY_SUPPORT;function o(t,e,r,n){var i=u.isBuffer(this),o=u.isBuffer(t);if(i&&o)return this.copy(t,e,r,n);if(c||i||o||!u.isView(this)||!u.isView(t))return a.copy.call(this,t,e,r,n);var s=r||null!=n?f.call(this,r,n):this;return t.set(s,e),s.length}function f(t,e){var r=this.slice||!c&&this.subarray;if(r)return r.call(this,t,e);var n=u.alloc.call(this,e-t);return o.call(this,n,0,t,e),n}},{"./buffer-lite":21,"./bufferish":26}],25:[function(t,e,n){var i=t("./bufferish");function r(t){return new Uint8Array(t)}(n=e.exports=i.hasArrayBuffer?r(0):[]).alloc=r,n.concat=i.concat,n.from=function(t){if(i.isView(t)){var e=t.byteOffset,r=t.byteLength;(t=t.buffer).byteLength!==r&&(t.slice?t=t.slice(e,e+r):(t=new Uint8Array(t)).byteLength!==r&&(t=Array.prototype.slice.call(t,e,e+r)))}else{if("string"==typeof t)return i.from.call(n,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},{"./bufferish":26}],26:[function(t,e,o){var r=o.global=t("./buffer-global"),n=o.hasBuffer=r&&!!r.isBuffer,i=o.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=o.isArray=t("isarray");o.isArrayBuffer=i?function(t){return t instanceof ArrayBuffer||d(t)}:v;var a=o.isBuffer=n?r.isBuffer:v,u=o.isView=i?ArrayBuffer.isView||g("ArrayBuffer","buffer"):v;o.alloc=p,o.concat=function(t,e){e||(e=0,Array.prototype.forEach.call(t,function(t){e+=t.length}));var r=this!==o&&this||t[0],n=p.call(r,e),i=0;return Array.prototype.forEach.call(t,function(t){i+=l.copy.call(t,n,i)}),n},o.from=function(t){return"string"==typeof t?function(t){var e=3*t.length,r=p.call(this,e),n=l.write.call(r,t);return e!==n&&(r=l.slice.call(r,0,n)),r}.call(this,t):y(this).from(t)};var c=o.Array=t("./bufferish-array"),f=o.Buffer=t("./bufferish-buffer"),h=o.Uint8Array=t("./bufferish-uint8array"),l=o.prototype=t("./bufferish-proto");function p(t){return y(this).alloc(t)}var d=g("ArrayBuffer");function y(t){return a(t)?f:u(t)?h:s(t)?c:n?f:i?h:c}function v(){return!1}function g(e,r){return e="[object "+e+"]",function(t){return null!=t&&{}.toString.call(r?t[r]:t)===e}}},{"./buffer-global":20,"./bufferish-array":22,"./bufferish-buffer":23,"./bufferish-proto":24,"./bufferish-uint8array":25,isarray:14}],27:[function(t,e,r){var n=t("isarray");r.createCodec=a,r.install=function(t){for(var e in t)o.prototype[e]=s(o.prototype[e],t[e])},r.filter=function(t){return n(t)?function(e){return e=e.slice(),function(t){return e.reduce(r,t)};function r(t,e){return e(t)}}(t):t};var i=t("./bufferish");function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function s(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function a(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=i.Uint8Array),this},r.preset=a({preset:!0})},{"./bufferish":26,isarray:14}],28:[function(t,e,r){t("./read-core"),t("./write-core"),r.codec={preset:t("./codec-base").preset}},{"./codec-base":27,"./read-core":40,"./write-core":43}],29:[function(t,e,r){r.DecodeBuffer=i;var n=t("./read-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t).codec){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}t("./flex-buffer").FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":39,"./read-core":40}],30:[function(t,e,r){r.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":29}],31:[function(t,e,r){r.Decoder=o;var n=t("event-lite"),i=t("./decode-buffer").DecodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":29,"event-lite":8}],32:[function(t,e,r){r.EncodeBuffer=i;var n=t("./write-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t).codec){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}t("./flex-buffer").FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":39,"./write-core":43}],33:[function(t,e,r){r.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":32}],34:[function(t,e,r){r.Encoder=o;var n=t("event-lite"),i=t("./encode-buffer").EncodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":32,"event-lite":8}],35:[function(t,e,r){r.ExtBuffer=function t(e,r){if(!(this instanceof t))return new t(e,r);this.buffer=n.from(e),this.type=r};var n=t("./bufferish")},{"./bufferish":26}],36:[function(e,t,r){r.setExtPackers=function(t){t.addExtPacker(14,Error,[h,u]),t.addExtPacker(1,EvalError,[h,u]),t.addExtPacker(2,RangeError,[h,u]),t.addExtPacker(3,ReferenceError,[h,u]),t.addExtPacker(4,SyntaxError,[h,u]),t.addExtPacker(5,TypeError,[h,u]),t.addExtPacker(6,URIError,[h,u]),t.addExtPacker(10,RegExp,[f,u]),t.addExtPacker(11,Boolean,[c,u]),t.addExtPacker(12,String,[c,u]),t.addExtPacker(13,Date,[Number,u]),t.addExtPacker(15,Number,[c,u]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,s),t.addExtPacker(18,Uint8Array,s),t.addExtPacker(19,Int16Array,s),t.addExtPacker(20,Uint16Array,s),t.addExtPacker(21,Int32Array,s),t.addExtPacker(22,Uint32Array,s),t.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,s),t.addExtPacker(26,ArrayBuffer,s),t.addExtPacker(29,DataView,s)),i.hasBuffer&&t.addExtPacker(27,o,i.from)};var n,i=e("./bufferish"),o=i.global,s=i.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(t){return n||(n=e("./encode").encode),n(t)}function c(t){return t.valueOf()}function f(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function h(t){var e={};for(var r in a)e[r]=t[r];return e}},{"./bufferish":26,"./encode":33}],37:[function(e,t,r){r.setExtUnpackers=function(t){t.addExtUnpacker(14,[a,c(Error)]),t.addExtUnpacker(1,[a,c(EvalError)]),t.addExtUnpacker(2,[a,c(RangeError)]),t.addExtUnpacker(3,[a,c(ReferenceError)]),t.addExtUnpacker(4,[a,c(SyntaxError)]),t.addExtUnpacker(5,[a,c(TypeError)]),t.addExtUnpacker(6,[a,c(URIError)]),t.addExtUnpacker(10,[a,u]),t.addExtUnpacker(11,[a,f(Boolean)]),t.addExtUnpacker(12,[a,f(String)]),t.addExtUnpacker(13,[a,f(Date)]),t.addExtUnpacker(15,[a,f(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,f(Int8Array)),t.addExtUnpacker(18,f(Uint8Array)),t.addExtUnpacker(19,[h,f(Int16Array)]),t.addExtUnpacker(20,[h,f(Uint16Array)]),t.addExtUnpacker(21,[h,f(Int32Array)]),t.addExtUnpacker(22,[h,f(Uint32Array)]),t.addExtUnpacker(23,[h,f(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,f(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,f(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,f(DataView)])),i.hasBuffer&&t.addExtUnpacker(27,f(o))};var n,i=e("./bufferish"),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(t){return n||(n=e("./decode").decode),n(t)}function u(t){return RegExp.apply(null,t)}function c(n){return function(t){var e=new n;for(var r in s)e[r]=t[r];return e}}function f(e){return function(t){return new e(t)}}function h(t){return new Uint8Array(t).buffer}},{"./bufferish":26,"./decode":30}],38:[function(t,e,r){t("./read-core"),t("./write-core"),r.createCodec=t("./codec-base").createCodec},{"./codec-base":27,"./read-core":40,"./write-core":43}],39:[function(t,e,r){r.FlexDecoder=o,r.FlexEncoder=s;var n=t("./bufferish"),i="BUFFER_SHORTAGE";function o(){if(!(this instanceof o))return new o}function s(){if(!(this instanceof s))return new s}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function u(t){(this.buffers||(this.buffers=[])).push(t)}function c(r){return function(t){for(var e in r)t[e]=r[e];return t}}o.mixin=c({bufferish:n,write:function(t){var e=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=i)throw t;this.offset=e;break}this.push(t)}},push:u,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(i);return this.offset=r,e},offset:0}),o.mixin(o.prototype),s.mixin=c({bufferish:n,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return n.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:u,pull:function(){var t=this.buffers||(this.buffers=[]),e=1<t.length?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);n.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),s.mixin(s.prototype)},{"./bufferish":26}],40:[function(t,e,r){var n=t("./ext-buffer").ExtBuffer,i=t("./ext-unpacker"),o=t("./read-format").readUint8,s=t("./read-token"),a=t("./codec-base");function u(){var t,n,e=this.options;return this.decode=(t=e,n=s.getReadToken(t),function(t){var e=o(t),r=n[e];if(!r)throw new Error("Invalid type: "+(e?"0x"+e.toString(16):e));return r(t)}),e&&e.preset&&i.setExtUnpackers(this),this}a.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=a.filter(e)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new n(t,e)}},init:u}),r.preset=u.call(a.preset)},{"./codec-base":27,"./ext-buffer":35,"./ext-unpacker":37,"./read-format":41,"./read-token":42}],41:[function(t,e,r){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,s=i.Int64BE;r.getReadFormat=function(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:c&&t&&t.usemap?l:h,array:p,str:d,bin:e?v:y,ext:g,uint8:m,uint16:b,uint32:E,uint64:j(8,r?C:x),int8:_,int16:w,int32:k,int64:j(8,r?B:A),float32:j(4,S),float64:j(8,T)}},r.readUint8=m;var a=t("./bufferish"),u=t("./bufferish-proto"),c="undefined"!=typeof Map,f=!0;function h(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function l(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function p(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function d(t,e){var r=t.reserve(e),n=r+e;return u.toString.call(t.buffer,"utf-8",r,n)}function y(t,e){var r=t.reserve(e),n=r+e,i=u.slice.call(t.buffer,r,n);return a.from(i)}function v(t,e){var r=t.reserve(e),n=r+e,i=u.slice.call(t.buffer,r,n);return a.Uint8Array.from(i).buffer}function g(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(u.slice.call(t.buffer,r,i))}function m(t){var e=t.reserve(1);return t.buffer[e]}function _(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function b(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function w(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function E(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function k(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function j(r,n){return function(t){var e=t.reserve(r);return n.call(t.buffer,e,f)}}function x(t){return new o(this,t).toNumber()}function A(t){return new s(this,t).toNumber()}function C(t){return new o(this,t)}function B(t){return new s(this,t)}function S(t){return n.read(this,t,!1,23,4)}function T(t){return n.read(this,t,!1,52,8)}},{"./bufferish":26,"./bufferish-proto":24,ieee754:11,"int64-buffer":12}],42:[function(t,e,r){var n=t("./read-format");function i(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=o(e);for(e=128;e<=143;e++)r[e]=a(e-128,t.map);for(e=144;e<=159;e++)r[e]=a(e-144,t.array);for(e=160;e<=191;e++)r[e]=a(e-160,t.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=s(t.uint8,t.bin),r[197]=s(t.uint16,t.bin),r[198]=s(t.uint32,t.bin),r[199]=s(t.uint8,t.ext),r[200]=s(t.uint16,t.ext),r[201]=s(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=a(1,t.ext),r[213]=a(2,t.ext),r[214]=a(4,t.ext),r[215]=a(8,t.ext),r[216]=a(16,t.ext),r[217]=s(t.uint8,t.str),r[218]=s(t.uint16,t.str),r[219]=s(t.uint32,t.str),r[220]=s(t.uint16,t.array),r[221]=s(t.uint32,t.array),r[222]=s(t.uint16,t.map),r[223]=s(t.uint32,t.map),e=224;e<=255;e++)r[e]=o(e-256);return r}function o(t){return function(){return t}}function s(r,n){return function(t){var e=r(t);return n(t,e)}}function a(e,r){return function(t){return r(t,e)}}r.getReadToken=function(t){var e=n.getReadFormat(t);return t&&t.useraw?function(t){var e,r=i(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=a(e-160,t.bin);return r}(e):i(e)}},{"./read-format":41}],43:[function(t,e,r){var o=t("./ext-buffer").ExtBuffer,i=t("./ext-packer"),s=t("./write-type"),a=t("./codec-base");function n(){var t,n,e=this.options;return this.encode=(t=e,n=s.getWriteType(t),function(t,e){var r=n[typeof e];if(!r)throw new Error('Unsupported type "'+typeof e+'": '+e);r(t,e)}),e&&e.preset&&i.setExtPackers(this),this}a.install({addExtPacker:function(e,t,r){r=a.filter(r);var n=t.name;n&&"Object"!==n?(this.extPackers||(this.extPackers={}))[n]=i:(this.extEncoderList||(this.extEncoderList=[])).unshift([t,i]);function i(t){return r&&(t=r(t)),new o(t,e)}},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:n}),r.preset=n.call(a.preset)},{"./codec-base":27,"./ext-buffer":35,"./ext-packer":36,"./write-type":45}],44:[function(t,e,r){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,s=i.Int64BE,a=t("./write-uint8").uint8,u=t("./bufferish"),c=u.global,f=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,h=u.hasBuffer&&c.prototype||{};function l(){var t=a.slice();return t[196]=p(196),t[197]=d(197),t[198]=y(198),t[199]=p(199),t[200]=d(200),t[201]=y(201),t[202]=v(202,4,h.writeFloatBE||_,!0),t[203]=v(203,8,h.writeDoubleBE||b,!0),t[204]=p(204),t[205]=d(205),t[206]=y(206),t[207]=v(207,8,g),t[208]=p(208),t[209]=d(209),t[210]=y(210),t[211]=v(211,8,m),t[217]=p(217),t[218]=d(218),t[219]=y(219),t[220]=d(220),t[221]=y(221),t[222]=d(222),t[223]=y(223),t}function p(i){return function(t,e){var r=t.reserve(2),n=t.buffer;n[r++]=i,n[r]=e}}function d(i){return function(t,e){var r=t.reserve(3),n=t.buffer;n[r++]=i,n[r++]=e>>>8,n[r]=e}}function y(i){return function(t,e){var r=t.reserve(5),n=t.buffer;n[r++]=i,n[r++]=e>>>24,n[r++]=e>>>16,n[r++]=e>>>8,n[r]=e}}function v(n,i,o,s){return function(t,e){var r=t.reserve(i+1);t.buffer[r++]=n,o.call(t.buffer,e,r,s)}}function g(t,e){new o(this,e,t)}function m(t,e){new s(this,e,t)}function _(t,e){n.write(this,t,e,!1,23,4)}function b(t,e){n.write(this,t,e,!1,52,8)}r.getWriteToken=function(t){return t&&t.uint8array?((r=l())[202]=v(202,4,_),r[203]=v(203,8,b),r):f||u.hasBuffer&&t&&t.safe?((e=a.slice())[196]=v(196,1,c.prototype.writeUInt8),e[197]=v(197,2,c.prototype.writeUInt16BE),e[198]=v(198,4,c.prototype.writeUInt32BE),e[199]=v(199,1,c.prototype.writeUInt8),e[200]=v(200,2,c.prototype.writeUInt16BE),e[201]=v(201,4,c.prototype.writeUInt32BE),e[202]=v(202,4,c.prototype.writeFloatBE),e[203]=v(203,8,c.prototype.writeDoubleBE),e[204]=v(204,1,c.prototype.writeUInt8),e[205]=v(205,2,c.prototype.writeUInt16BE),e[206]=v(206,4,c.prototype.writeUInt32BE),e[207]=v(207,8,g),e[208]=v(208,1,c.prototype.writeInt8),e[209]=v(209,2,c.prototype.writeInt16BE),e[210]=v(210,4,c.prototype.writeInt32BE),e[211]=v(211,8,m),e[217]=v(217,1,c.prototype.writeUInt8),e[218]=v(218,2,c.prototype.writeUInt16BE),e[219]=v(219,4,c.prototype.writeUInt32BE),e[220]=v(220,2,c.prototype.writeUInt16BE),e[221]=v(221,4,c.prototype.writeUInt32BE),e[222]=v(222,2,c.prototype.writeUInt16BE),e[223]=v(223,4,c.prototype.writeUInt32BE),e):l();var e,r}},{"./bufferish":26,"./write-uint8":46,ieee754:11,"int64-buffer":12}],45:[function(t,e,r){var g=t("isarray"),n=t("int64-buffer"),m=n.Uint64BE,_=n.Int64BE,i=t("./bufferish"),h=t("./bufferish-proto"),a=t("./write-token"),b=t("./write-uint8").uint8,w=t("./ext-buffer").ExtBuffer,u="undefined"!=typeof Uint8Array,c="undefined"!=typeof Map,E=[];E[1]=212,E[2]=213,E[4]=214,E[8]=215,E[16]=216,r.getWriteType=function(t){var f,l=a.getWriteToken(t),e=t&&t.useraw,r=u&&t&&t.binarraybuffer,p=r?i.isArrayBuffer:i.isBuffer,d=r?function(t,e){n(t,new Uint8Array(e))}:n,y=c&&t&&t.usemap?function(n,t){if(!(t instanceof Map))return s(n,t);var e=t.size;l[e<16?128+e:e<=65535?222:223](n,e);var i=n.codec.encode;t.forEach(function(t,e,r){i(n,e),i(n,t)})}:s;return{boolean:function(t,e){l[e?195:194](t,e)},function:v,number:function(t,e){var r=0|e;e===r?l[-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210](t,r):l[203](t,e)},object:e?function(t,e){if(p(e))return r=t,i=(n=e).length,l[i<32?160+i:i<=65535?218:219](r,i),void r.send(n);var r,n,i;o(t,e)}:o,string:(f=e?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5},function(t,e){var r=e.length,n=5+3*r;t.offset=t.reserve(n);var i=t.buffer,o=f(r),s=t.offset+o;r=h.write.call(i,e,s);var a=f(r);if(o!==a){var u=s+a-o,c=s+r;h.copy.call(i,i,u,s,c)}l[1===a?160+r:a<=3?215+a:219](t,r),t.offset+=r}),symbol:v,undefined:v};function o(t,e){if(null===e)return v(t,e);if(p(e))return d(t,e);if(g(e))return function(t,e){var r=e.length;l[r<16?144+r:r<=65535?220:221](t,r);for(var n=t.codec.encode,i=0;i<r;i++)n(t,e[i])}(t,e);if(m.isUint64BE(e))return r=t,n=e,void l[207](r,n.toArray());var r,n,i,o;if(_.isInt64BE(e))return i=t,o=e,void l[211](i,o.toArray());var s,a,u,c,f,h=t.codec.getExtPacker(e);if(h&&(e=h(e)),e instanceof w)return s=t,c=(u=(a=e).buffer).length,f=E[c]||(c<255?199:c<=65535?200:201),l[f](s,c),b[a.type](s),void s.send(u);y(t,e)}function v(t,e){l[192](t,e)}function n(t,e){var r=e.length;l[r<255?196:r<=65535?197:198](t,r),t.send(e)}function s(e,r){var t=Object.keys(r),n=t.length;l[n<16?128+n:n<=65535?222:223](e,n);var i=e.codec.encode;t.forEach(function(t){i(e,t),i(e,r[t])})}}},{"./bufferish":26,"./bufferish-proto":24,"./ext-buffer":35,"./write-token":44,"./write-uint8":46,"int64-buffer":12,isarray:14}],46:[function(t,e,r){for(var n=r.uint8=new Array(256),i=0;i<=255;i++)n[i]=o(i);function o(r){return function(t){var e=t.reserve(1);t.buffer[e]=r}}},{}],47:[function(t,e,r){"use strict";var n=t("is-extendable"),i=t("mixin-object"),o=t("kind-of");function s(t){var e=o(t);return s.hasOwnProperty(e)?s[e](t):t}s.array=function(t){return t.slice()},s.date=function(t){return new Date(+t)},s.object=function(t){return n(t)?i({},t):t},s.map=function(t){return new Map(t)},s.regexp=function(t){var e="";return e+=t.multiline?"m":"",e+=t.global?"g":"",e+=t.ignoreCase?"i":"",new RegExp(t.source,e)},s.set=function(t){return new Set(t)},e.exports=s},{"is-extendable":48,"kind-of":16,"mixin-object":17}],48:[function(t,e,r){arguments[4][18][0].apply(r,arguments)},{dup:18,"is-plain-object":13}]},{},[1,2,3])(3)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(t,e,r){var u=t("./url"),n=t("socket.io-parser"),c=t("./manager"),f=t("debug")("socket.io-client");e.exports=r=i;var h=r.managers={};function i(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n=u(t),i=n.source,o=n.id,s=n.path,a=h[o]&&s in h[o].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?(f("ignoring socket cache for %s",i),r=c(i,e)):(h[o]||(f("new io instance for %s",i),h[o]=c(i,e)),r=h[o]),n.query&&!e.query&&(e.query=n.query),r.socket(n.path,e)}r.protocol=n.protocol,r.connect=i,r.Manager=t("./manager"),r.Socket=t("./socket")},{"./manager":46,"./socket":48,"./url":49,debug:20,"socket.io-parser":51}],46:[function(t,e,r){var u=t("engine.io-client"),o=t("./socket"),n=t("component-emitter"),i=t("socket.io-parser"),c=t("./on"),s=t("component-bind"),f=t("debug")("socket.io-client:manager"),a=t("indexof"),h=t("backo2"),l=Object.prototype.hasOwnProperty;function p(t,e){if(!(this instanceof p))return new p(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}(e.exports=p).prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)l.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},p.prototype.updateSocketIds=function(){for(var t in this.nsps)l.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},p.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},n(p.prototype),p.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},p.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},p.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(r,t){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=u(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=c(e,"open",function(){n.onopen(),r&&r()}),o=c(e,"error",function(t){if(f("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),r){var e=new Error("Connection error");e.data=t,r(e)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;f("connect attempt will timeout after %d",s);var a=setTimeout(function(){f("connect attempt timed out after %d",s),i.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},p.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(c(t,"data",s(this,"ondata"))),this.subs.push(c(t,"ping",s(this,"onping"))),this.subs.push(c(t,"pong",s(this,"onpong"))),this.subs.push(c(t,"error",s(this,"onerror"))),this.subs.push(c(t,"close",s(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",s(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(t){this.decoder.add(t)},p.prototype.ondecoded=function(t){this.emit("packet",t)},p.prototype.onerror=function(t){f("error",t),this.emitAll("error",t)},p.prototype.socket=function(t,e){var r=this.nsps[t];if(!r){r=new o(this,t,e),this.nsps[t]=r;var n=this;r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(t)}),this.autoConnect&&i()}function i(){~a(n.connecting,r)||n.connecting.push(r)}return r},p.prototype.destroy=function(t){var e=a(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},p.prototype.packet=function(r){f("writing packet %j",r);var n=this;r.query&&0===r.type&&(r.nsp+="?"+r.query),n.encoding?n.packetBuffer.push(r):(n.encoding=!0,this.encoder.encode(r,function(t){for(var e=0;e<t.length;e++)n.engine.write(t[e],r.options);n.encoding=!1,n.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},p.prototype.cleanup=function(){f("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(t){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(f("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(f("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(f("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},p.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":47,"./socket":48,backo2:10,"component-bind":17,"component-emitter":18,debug:20,"engine.io-client":22,indexof:38,"socket.io-parser":51}],47:[function(t,e,r){e.exports=function(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}},{}],48:[function(t,e,r){var i=t("socket.io-parser"),n=t("component-emitter"),o=t("to-array"),s=t("./on"),a=t("component-bind"),u=t("debug")("socket.io-client:socket"),c=t("parseqs"),f=t("has-binary2");e.exports=p;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=n.prototype.emit;function p(t,e,r){this.io=t,this.nsp=e,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}n(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},p.prototype.emit=function(t){if(h.hasOwnProperty(t))return l.apply(this,arguments),this;var e=o(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:f(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},p.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},p.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},p.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},p.prototype.onpacket=function(t){var e=t.nsp===this.nsp,r=t.type===i.ERROR&&"/"===t.nsp;if(e||r)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},p.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},p.prototype.ack=function(e){var r=this,n=!1;return function(){if(!n){n=!0;var t=o(arguments);u("sending ack %j",t),r.packet({type:f(t)?i.BINARY_ACK:i.ACK,id:e,data:t})}}},p.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(t){return this.flags.compress=t,this},p.prototype.binary=function(t){return this.flags.binary=t,this}},{"./on":47,"component-bind":17,"component-emitter":18,debug:20,"has-binary2":35,parseqs:41,"socket.io-parser":51,"to-array":54}],49:[function(t,e,r){(function(i){var o=t("parseuri"),s=t("debug")("socket.io-client:url");e.exports=function(t,e){var r=t;e=e||i.location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),s("parse %s",t),r=o(t));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var n=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port,r.href=r.protocol+"://"+n+(e&&e.port===r.port?"":":"+r.port),r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:20,parseuri:42}],50:[function(r,t,n){(function(t){var f=r("isarray"),h=r("./is-buffer"),e=Object.prototype.toString,l="function"==typeof t.Blob||"[object BlobConstructor]"===e.call(t.Blob),p="function"==typeof t.File||"[object FileConstructor]"===e.call(t.File);n.deconstructPacket=function(t){var e=[],r=t.data,n=t;return n.data=function t(e,r){if(!e)return e;{if(h(e)){var n={_placeholder:!0,num:r.length};return r.push(e),n}if(f(e)){for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=t(e[o],r);return i}if("object"==typeof e&&!(e instanceof Date)){var i={};for(var s in e)i[s]=t(e[s],r);return i}}return e}(r,e),n.attachments=e.length,{packet:n,buffers:e}},n.reconstructPacket=function(t,e){return t.data=function t(e,r){if(!e)return e;{if(e&&e._placeholder)return r[e.num];if(f(e))for(var n=0;n<e.length;n++)e[n]=t(e[n],r);else if("object"==typeof e)for(var i in e)e[i]=t(e[i],r)}return e}(t.data,e),t.attachments=void 0,t},n.removeBlobs=function(t,a){var u=0,c=t;!function t(e,r,n){if(!e)return e;if(l&&e instanceof Blob||p&&e instanceof File){u++;var i=new FileReader;i.onload=function(){n?n[r]=this.result:c=this.result,--u||a(c)},i.readAsArrayBuffer(e)}else if(f(e))for(var o=0;o<e.length;o++)t(e[o],o,e);else if("object"==typeof e&&!h(e))for(var s in e)t(e[s],s,e)}(c),u||a(c)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":52,isarray:39}],51:[function(t,e,u){var c=t("debug")("socket.io-parser"),r=t("component-emitter"),o=t("./binary"),f=t("isarray"),n=t("./is-buffer");function i(){}u.protocol=4,u.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],u.CONNECT=0,u.DISCONNECT=1,u.EVENT=2,u.ACK=3,u.ERROR=4,u.BINARY_EVENT=5,u.BINARY_ACK=6,u.Encoder=i,u.Decoder=h;var s=u.ERROR+'"encode error"';function a(t){var e=""+t.type;if(u.BINARY_EVENT!==t.type&&u.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===r)return s;e+=r}return c("encoded %j as %s",t,e),e}function h(){this.reconstructor=null}function l(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:u.ERROR,data:"parser error: "+t}}i.prototype.encode=function(t,e){var r,i;(c("encoding packet %j",t),u.BINARY_EVENT===t.type||u.BINARY_ACK===t.type)?(r=t,i=e,o.removeBlobs(r,function(t){var e=o.deconstructPacket(t),r=a(e.packet),n=e.buffers;n.unshift(r),i(n)})):e([a(t)])},r(h.prototype),h.prototype.add=function(t){var e;if("string"==typeof t)e=function(t){var e=0,r={type:Number(t.charAt(0))};if(null==u.types[r.type])return p("unknown packet type "+r.type);if(u.BINARY_EVENT===r.type||u.BINARY_ACK===r.type){for(var n="";"-"!==t.charAt(++e)&&(n+=t.charAt(e),e!=t.length););if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(n)}if("/"===t.charAt(e+1))for(r.nsp="";++e;){var i=t.charAt(e);if(","===i)break;if(r.nsp+=i,e===t.length)break}else r.nsp="/";var o=t.charAt(e+1);if(""!==o&&Number(o)==o){for(r.id="";++e;){var i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(r.id+=t.charAt(e),e===t.length)break}r.id=Number(r.id)}if(t.charAt(++e)){var s=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e)),a=!1!==s&&(r.type===u.ERROR||f(s));if(!a)return p("invalid payload");r.data=s}return c("decoded %s as %j",t,r),r}(t),u.BINARY_EVENT===e.type||u.BINARY_ACK===e.type?(this.reconstructor=new l(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!n(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":50,"./is-buffer":52,"component-emitter":18,debug:20,isarray:39}],52:[function(t,o,e){(function(e){o.exports=function(t){return r&&e.Buffer.isBuffer(t)||n&&(t instanceof e.ArrayBuffer||i(t))};var r="function"==typeof e.Buffer&&"function"==typeof e.Buffer.isBuffer,n="function"==typeof e.ArrayBuffer,i=n&&"function"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(u,t,c){(function(t,e){var n=u("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function a(t,e){this._id=t,this._clearFn=e}c.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},c.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},c.setImmediate="function"==typeof t?t:function(t){var e=s++,r=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,n(function(){o[e]&&(r?t.apply(null,r):t.call(null),c.clearImmediate(e))}),e},c.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":43,timers:53}],54:[function(t,e,r){e.exports=function(t,e){for(var r=[],n=(e=e||0)||0;n<t.length;n++)r[n-e]=t[n];return r}},{}],55:[function(t,e,r){"use strict";var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,u=0;function c(t){for(var e="";e=i[t%o]+e,0<(t=Math.floor(t/o)););return e}function f(){var t=c(+new Date);return t!==n?(a=0,n=t):t+"."+c(a++)}for(;u<o;u++)s[i[u]]=u;f.encode=c,f.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+s[t.charAt(u)];return e},e.exports=f},{}]},{},[5,1,2,3,4,6,7])(7)});